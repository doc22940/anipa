!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.anipa=t():e.anipa=t()}(window,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=5)}([function(e,t){var r,n,i=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function o(e){if(r===setTimeout)return setTimeout(e,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:a}catch(e){r=a}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(e){n=s}}();var u,l=[],c=!1,p=-1;function h(){c&&u&&(c=!1,u.length?l=u.concat(l):p=-1,l.length&&f())}function f(){if(!c){var e=o(h);c=!0;for(var t=l.length;t;){for(u=l,l=[];++p<t;)u&&u[p].run();p=-1,t=l.length}u=null,c=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function g(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new d(e,t)),1!==l.length||c||o(f)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){(function(t,r){
/*!
 *
 * Copyright 2009-2017 Kris Kowal under the terms of the MIT
 * license found at https://github.com/kriskowal/q/blob/v1/LICENSE
 *
 * With parts by Tyler Close
 * Copyright 2007-2009 Tyler Close under the terms of the MIT X license found
 * at http://www.opensource.org/licenses/mit-license.html
 * Forked at ref_send.js version: 2009-05-11
 *
 * With parts by Mark Miller
 * Copyright (C) 2011 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */
!function(t){"use strict";"function"==typeof bootstrap?bootstrap("promise",t):e.exports=t()}((function(){"use strict";var e=!1;try{throw new Error}catch(t){e=!!t.stack}var n,i=S(),a=function(){},s=function(){var e={task:void 0,next:null},n=e,i=!1,a=void 0,o=!1,u=[];function l(){for(var t,r;e.next;)t=(e=e.next).task,e.task=void 0,(r=e.domain)&&(e.domain=void 0,r.enter()),c(t,r);for(;u.length;)c(t=u.pop());i=!1}function c(e,t){try{e()}catch(e){if(o)throw t&&t.exit(),setTimeout(l,0),t&&t.enter(),e;setTimeout((function(){throw e}),0)}t&&t.exit()}if(s=function(e){n=n.next={task:e,domain:o&&t.domain,next:null},i||(i=!0,a())},"object"==typeof t&&"[object process]"===t.toString()&&t.nextTick)o=!0,a=function(){t.nextTick(l)};else if("function"==typeof r)a="undefined"!=typeof window?r.bind(window,l):function(){r(l)};else if("undefined"!=typeof MessageChannel){var p=new MessageChannel;p.port1.onmessage=function(){a=h,p.port1.onmessage=l,l()};var h=function(){p.port2.postMessage(0)};a=function(){setTimeout(l,0),h()}}else a=function(){setTimeout(l,0)};return s.runAfter=function(e){u.push(e),i||(i=!0,a())},s}(),o=Function.call;function u(e){return function(){return o.apply(e,arguments)}}var l,c=u(Array.prototype.slice),p=u(Array.prototype.reduce||function(e,t){var r=0,n=this.length;if(1===arguments.length)for(;;){if(r in this){t=this[r++];break}if(++r>=n)throw new TypeError}for(;r<n;r++)r in this&&(t=e(t,this[r],r));return t}),h=u(Array.prototype.indexOf||function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return t;return-1}),f=u(Array.prototype.map||function(e,t){var r=this,n=[];return p(r,(function(i,a,s){n.push(e.call(t,a,s,r))}),void 0),n}),d=Object.create||function(e){function t(){}return t.prototype=e,new t},g=Object.defineProperty||function(e,t,r){return e[t]=r.value,e},m=u(Object.prototype.hasOwnProperty),v=Object.keys||function(e){var t=[];for(var r in e)m(e,r)&&t.push(r);return t},y=u(Object.prototype.toString);function b(e){return"[object StopIteration]"===y(e)||e instanceof l}l="undefined"!=typeof ReturnValue?ReturnValue:function(e){this.value=e};var x="From previous event:";function j(t,r){if(e&&r.stack&&"object"==typeof t&&null!==t&&t.stack){for(var n=[],i=r;i;i=i.source)i.stack&&(!t.__minimumStackCounter__||t.__minimumStackCounter__>i.stackCounter)&&(g(t,"__minimumStackCounter__",{value:i.stackCounter,configurable:!0}),n.unshift(i.stack));n.unshift(t.stack);var a=function(e){for(var t=e.split("\n"),r=[],n=0;n<t.length;++n){var i=t[n];!w(i)&&(-1===(a=i).indexOf("(module.js:")&&-1===a.indexOf("(node.js:"))&&i&&r.push(i)}var a;return r.join("\n")}(n.join("\n"+x+"\n"));g(t,"stack",{value:a,configurable:!0})}}function T(e){var t=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(e);if(t)return[t[1],Number(t[2])];var r=/at ([^ ]+):(\d+):(?:\d+)$/.exec(e);if(r)return[r[1],Number(r[2])];var n=/.*@(.+):(\d+)$/.exec(e);return n?[n[1],Number(n[2])]:void 0}function w(e){var t=T(e);if(!t)return!1;var r=t[0],a=t[1];return r===n&&a>=i&&a<=Z}function S(){if(e)try{throw new Error}catch(e){var t=e.stack.split("\n"),r=T(t[0].indexOf("@")>0?t[1]:t[2]);if(!r)return;return n=r[0],r[1]}}function k(e){return e instanceof E?e:L(e)?function(e){var t=P();return k.nextTick((function(){try{e.then(t.resolve,t.reject,t.notify)}catch(e){t.reject(e)}})),t.promise}(e):G(e)}k.resolve=k,k.nextTick=s,k.longStackSupport=!1;var C=1;function P(){var t,r=[],n=[],i=d(P.prototype),a=d(E.prototype);if(a.promiseDispatch=function(e,i,a){var s=c(arguments);r?(r.push(s),"when"===i&&a[1]&&n.push(a[1])):k.nextTick((function(){t.promiseDispatch.apply(t,s)}))},a.valueOf=function(){if(r)return a;var e=$(t);return I(e)&&(t=e),e},a.inspect=function(){return t?t.inspect():{state:"pending"}},k.longStackSupport&&e)try{throw new Error}catch(e){a.stack=e.stack.substring(e.stack.indexOf("\n")+1),a.stackCounter=C++}function s(i){t=i,k.longStackSupport&&e&&(a.source=i),p(r,(function(e,t){k.nextTick((function(){i.promiseDispatch.apply(i,t)}))}),void 0),r=void 0,n=void 0}return i.promise=a,i.resolve=function(e){t||s(k(e))},i.fulfill=function(e){t||s(G(e))},i.reject=function(e){t||s(V(e))},i.notify=function(e){t||p(n,(function(t,r){k.nextTick((function(){r(e)}))}),void 0)},i}function O(e){if("function"!=typeof e)throw new TypeError("resolver must be a function.");var t=P();try{e(t.resolve,t.reject,t.notify)}catch(e){t.reject(e)}return t.promise}function R(e){return O((function(t,r){for(var n=0,i=e.length;n<i;n++)k(e[n]).then(t,r)}))}function E(e,t,r){void 0===t&&(t=function(e){return V(new Error("Promise does not support operation: "+e))}),void 0===r&&(r=function(){return{state:"unknown"}});var n=d(E.prototype);if(n.promiseDispatch=function(r,i,a){var s;try{s=e[i]?e[i].apply(n,a):t.call(n,i,a)}catch(e){s=V(e)}r&&r(s)},n.inspect=r,r){var i=r();"rejected"===i.state&&(n.exception=i.reason),n.valueOf=function(){var e=r();return"pending"===e.state||"rejected"===e.state?n:e.value}}return n}function M(e,t,r,n){return k(e).then(t,r,n)}function $(e){if(I(e)){var t=e.inspect();if("fulfilled"===t.state)return t.value}return e}function I(e){return e instanceof E}function L(e){return(t=e)===Object(t)&&"function"==typeof e.then;var t}"object"==typeof t&&t&&t.env&&t.env.Q_DEBUG&&(k.longStackSupport=!0),k.defer=P,P.prototype.makeNodeResolver=function(){var e=this;return function(t,r){t?e.reject(t):arguments.length>2?e.resolve(c(arguments,1)):e.resolve(r)}},k.Promise=O,k.promise=O,O.race=R,O.all=U,O.reject=V,O.resolve=k,k.passByCopy=function(e){return e},E.prototype.passByCopy=function(){return this},k.join=function(e,t){return k(e).join(t)},E.prototype.join=function(e){return k([this,e]).spread((function(e,t){if(e===t)return e;throw new Error("Q can't join: not the same: "+e+" "+t)}))},k.race=R,E.prototype.race=function(){return this.then(k.race)},k.makePromise=E,E.prototype.toString=function(){return"[object Promise]"},E.prototype.then=function(e,t,r){var n=this,i=P(),a=!1;return k.nextTick((function(){n.promiseDispatch((function(t){a||(a=!0,i.resolve(function(t){try{return"function"==typeof e?e(t):t}catch(e){return V(e)}}(t)))}),"when",[function(e){a||(a=!0,i.resolve(function(e){if("function"==typeof t){j(e,n);try{return t(e)}catch(e){return V(e)}}return V(e)}(e)))}])})),n.promiseDispatch(void 0,"when",[void 0,function(e){var t,n=!1;try{t=function(e){return"function"==typeof r?r(e):e}(e)}catch(e){if(n=!0,!k.onerror)throw e;k.onerror(e)}n||i.notify(t)}]),i.promise},k.tap=function(e,t){return k(e).tap(t)},E.prototype.tap=function(e){return e=k(e),this.then((function(t){return e.fcall(t).thenResolve(t)}))},k.when=M,E.prototype.thenResolve=function(e){return this.then((function(){return e}))},k.thenResolve=function(e,t){return k(e).thenResolve(t)},E.prototype.thenReject=function(e){return this.then((function(){throw e}))},k.thenReject=function(e,t){return k(e).thenReject(t)},k.nearer=$,k.isPromise=I,k.isPromiseAlike=L,k.isPending=function(e){return I(e)&&"pending"===e.inspect().state},E.prototype.isPending=function(){return"pending"===this.inspect().state},k.isFulfilled=function(e){return!I(e)||"fulfilled"===e.inspect().state},E.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},k.isRejected=function(e){return I(e)&&"rejected"===e.inspect().state},E.prototype.isRejected=function(){return"rejected"===this.inspect().state};var D,N,F,X=[],Y=[],A=[],_=!0;function B(){X.length=0,Y.length=0,_||(_=!0)}function V(e){var r=E({when:function(r){return r&&function(e){if(_){var r=h(Y,e);-1!==r&&("object"==typeof t&&"function"==typeof t.emit&&k.nextTick.runAfter((function(){var n=h(A,e);-1!==n&&(t.emit("rejectionHandled",X[r],e),A.splice(n,1))})),Y.splice(r,1),X.splice(r,1))}}(this),r?r(e):this}},(function(){return this}),(function(){return{state:"rejected",reason:e}}));return function(e,r){_&&("object"==typeof t&&"function"==typeof t.emit&&k.nextTick.runAfter((function(){-1!==h(Y,e)&&(t.emit("unhandledRejection",r,e),A.push(e))})),Y.push(e),r&&void 0!==r.stack?X.push(r.stack):X.push("(no stack) "+r))}(r,e),r}function G(e){return E({when:function(){return e},get:function(t){return e[t]},set:function(t,r){e[t]=r},delete:function(t){delete e[t]},post:function(t,r){return null==t?e.apply(void 0,r):e[t].apply(e,r)},apply:function(t,r){return e.apply(t,r)},keys:function(){return v(e)}},void 0,(function(){return{state:"fulfilled",value:e}}))}function q(e,t,r){return k(e).spread(t,r)}function z(e,t,r){return k(e).dispatch(t,r)}function U(e){return M(e,(function(e){var t=0,r=P();return p(e,(function(n,i,a){var s;I(i)&&"fulfilled"===(s=i.inspect()).state?e[a]=s.value:(++t,M(i,(function(n){e[a]=n,0==--t&&r.resolve(e)}),r.reject,(function(e){r.notify({index:a,value:e})})))}),void 0),0===t&&r.resolve(e),r.promise}))}function H(e){if(0===e.length)return k.resolve();var t=k.defer(),r=0;return p(e,(function(n,i,a){var s=e[a];r++,M(s,(function(e){t.resolve(e)}),(function(e){if(0===--r){var n=e||new Error(""+e);n.message="Q can't get fulfillment value from any promise, all promises were rejected. Last error message: "+n.message,t.reject(n)}}),(function(e){t.notify({index:a,value:e})}))}),void 0),t.promise}function Q(e){return M(e,(function(e){return e=f(e,k),M(U(f(e,(function(e){return M(e,a,a)}))),(function(){return e}))}))}k.resetUnhandledRejections=B,k.getUnhandledReasons=function(){return X.slice()},k.stopUnhandledRejectionTracking=function(){B(),_=!1},B(),k.reject=V,k.fulfill=G,k.master=function(e){return E({isDef:function(){}},(function(t,r){return z(e,t,r)}),(function(){return k(e).inspect()}))},k.spread=q,E.prototype.spread=function(e,t){return this.all().then((function(t){return e.apply(void 0,t)}),t)},k.async=function(e){return function(){function t(e,t){var a;if("undefined"==typeof StopIteration){try{a=r[e](t)}catch(e){return V(e)}return a.done?k(a.value):M(a.value,n,i)}try{a=r[e](t)}catch(e){return b(e)?k(e.value):V(e)}return M(a,n,i)}var r=e.apply(this,arguments),n=t.bind(t,"next"),i=t.bind(t,"throw");return n()}},k.spawn=function(e){k.done(k.async(e)())},k.return=function(e){throw new l(e)},k.promised=function(e){return function(){return q([this,U(arguments)],(function(t,r){return e.apply(t,r)}))}},k.dispatch=z,E.prototype.dispatch=function(e,t){var r=this,n=P();return k.nextTick((function(){r.promiseDispatch(n.resolve,e,t)})),n.promise},k.get=function(e,t){return k(e).dispatch("get",[t])},E.prototype.get=function(e){return this.dispatch("get",[e])},k.set=function(e,t,r){return k(e).dispatch("set",[t,r])},E.prototype.set=function(e,t){return this.dispatch("set",[e,t])},k.del=k.delete=function(e,t){return k(e).dispatch("delete",[t])},E.prototype.del=E.prototype.delete=function(e){return this.dispatch("delete",[e])},k.mapply=k.post=function(e,t,r){return k(e).dispatch("post",[t,r])},E.prototype.mapply=E.prototype.post=function(e,t){return this.dispatch("post",[e,t])},k.send=k.mcall=k.invoke=function(e,t){return k(e).dispatch("post",[t,c(arguments,2)])},E.prototype.send=E.prototype.mcall=E.prototype.invoke=function(e){return this.dispatch("post",[e,c(arguments,1)])},k.fapply=function(e,t){return k(e).dispatch("apply",[void 0,t])},E.prototype.fapply=function(e){return this.dispatch("apply",[void 0,e])},k.try=k.fcall=function(e){return k(e).dispatch("apply",[void 0,c(arguments,1)])},E.prototype.fcall=function(){return this.dispatch("apply",[void 0,c(arguments)])},k.fbind=function(e){var t=k(e),r=c(arguments,1);return function(){return t.dispatch("apply",[this,r.concat(c(arguments))])}},E.prototype.fbind=function(){var e=this,t=c(arguments);return function(){return e.dispatch("apply",[this,t.concat(c(arguments))])}},k.keys=function(e){return k(e).dispatch("keys",[])},E.prototype.keys=function(){return this.dispatch("keys",[])},k.all=U,E.prototype.all=function(){return U(this)},k.any=H,E.prototype.any=function(){return H(this)},k.allResolved=(D=Q,N="allResolved",F="allSettled",function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(N+" is deprecated, use "+F+" instead.",new Error("").stack),D.apply(D,arguments)}),E.prototype.allResolved=function(){return Q(this)},k.allSettled=function(e){return k(e).allSettled()},E.prototype.allSettled=function(){return this.then((function(e){return U(f(e,(function(e){function t(){return e.inspect()}return(e=k(e)).then(t,t)})))}))},k.fail=k.catch=function(e,t){return k(e).then(void 0,t)},E.prototype.fail=E.prototype.catch=function(e){return this.then(void 0,e)},k.progress=function(e,t){return k(e).then(void 0,void 0,t)},E.prototype.progress=function(e){return this.then(void 0,void 0,e)},k.fin=k.finally=function(e,t){return k(e).finally(t)},E.prototype.fin=E.prototype.finally=function(e){if(!e||"function"!=typeof e.apply)throw new Error("Q can't apply finally callback");return e=k(e),this.then((function(t){return e.fcall().then((function(){return t}))}),(function(t){return e.fcall().then((function(){throw t}))}))},k.done=function(e,t,r,n){return k(e).done(t,r,n)},E.prototype.done=function(e,r,n){var i=function(e){k.nextTick((function(){if(j(e,a),!k.onerror)throw e;k.onerror(e)}))},a=e||r||n?this.then(e,r,n):this;"object"==typeof t&&t&&t.domain&&(i=t.domain.bind(i)),a.then(void 0,i)},k.timeout=function(e,t,r){return k(e).timeout(t,r)},E.prototype.timeout=function(e,t){var r=P(),n=setTimeout((function(){t&&"string"!=typeof t||((t=new Error(t||"Timed out after "+e+" ms")).code="ETIMEDOUT"),r.reject(t)}),e);return this.then((function(e){clearTimeout(n),r.resolve(e)}),(function(e){clearTimeout(n),r.reject(e)}),r.notify),r.promise},k.delay=function(e,t){return void 0===t&&(t=e,e=void 0),k(e).delay(t)},E.prototype.delay=function(e){return this.then((function(t){var r=P();return setTimeout((function(){r.resolve(t)}),e),r.promise}))},k.nfapply=function(e,t){return k(e).nfapply(t)},E.prototype.nfapply=function(e){var t=P(),r=c(e);return r.push(t.makeNodeResolver()),this.fapply(r).fail(t.reject),t.promise},k.nfcall=function(e){var t=c(arguments,1);return k(e).nfapply(t)},E.prototype.nfcall=function(){var e=c(arguments),t=P();return e.push(t.makeNodeResolver()),this.fapply(e).fail(t.reject),t.promise},k.nfbind=k.denodeify=function(e){if(void 0===e)throw new Error("Q can't wrap an undefined function");var t=c(arguments,1);return function(){var r=t.concat(c(arguments)),n=P();return r.push(n.makeNodeResolver()),k(e).fapply(r).fail(n.reject),n.promise}},E.prototype.nfbind=E.prototype.denodeify=function(){var e=c(arguments);return e.unshift(this),k.denodeify.apply(void 0,e)},k.nbind=function(e,t){var r=c(arguments,2);return function(){var n=r.concat(c(arguments)),i=P();function a(){return e.apply(t,arguments)}return n.push(i.makeNodeResolver()),k(a).fapply(n).fail(i.reject),i.promise}},E.prototype.nbind=function(){var e=c(arguments,0);return e.unshift(this),k.nbind.apply(void 0,e)},k.nmapply=k.npost=function(e,t,r){return k(e).npost(t,r)},E.prototype.nmapply=E.prototype.npost=function(e,t){var r=c(t||[]),n=P();return r.push(n.makeNodeResolver()),this.dispatch("post",[e,r]).fail(n.reject),n.promise},k.nsend=k.nmcall=k.ninvoke=function(e,t){var r=c(arguments,2),n=P();return r.push(n.makeNodeResolver()),k(e).dispatch("post",[t,r]).fail(n.reject),n.promise},E.prototype.nsend=E.prototype.nmcall=E.prototype.ninvoke=function(e){var t=c(arguments,1),r=P();return t.push(r.makeNodeResolver()),this.dispatch("post",[e,t]).fail(r.reject),r.promise},k.nodeify=function(e,t){return k(e).nodeify(t)},E.prototype.nodeify=function(e){if(!e)return this;this.then((function(t){k.nextTick((function(){e(null,t)}))}),(function(t){k.nextTick((function(){e(t)}))}))},k.noConflict=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var Z=S();return k}))}).call(this,r(0),r(3).setImmediate)},function(e,t,r){(function(e){var n=void 0!==e&&e||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function a(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new a(i.call(setTimeout,n,arguments),clearTimeout)},t.setInterval=function(){return new a(i.call(setInterval,n,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(n,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},r(4),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,r(1))},function(e,t,r){(function(e,t){!function(e,r){"use strict";if(!e.setImmediate){var n,i,a,s,o,u=1,l={},c=!1,p=e.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(e);h=h&&h.setTimeout?h:e,"[object process]"==={}.toString.call(e.process)?n=function(e){t.nextTick((function(){d(e)}))}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}()?e.MessageChannel?((a=new MessageChannel).port1.onmessage=function(e){d(e.data)},n=function(e){a.port2.postMessage(e)}):p&&"onreadystatechange"in p.createElement("script")?(i=p.documentElement,n=function(e){var t=p.createElement("script");t.onreadystatechange=function(){d(e),t.onreadystatechange=null,i.removeChild(t),t=null},i.appendChild(t)}):n=function(e){setTimeout(d,0,e)}:(s="setImmediate$"+Math.random()+"$",o=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(s)&&d(+t.data.slice(s.length))},e.addEventListener?e.addEventListener("message",o,!1):e.attachEvent("onmessage",o),n=function(t){e.postMessage(s+t,"*")}),h.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var i={callback:e,args:t};return l[u]=i,n(u),u++},h.clearImmediate=f}function f(e){delete l[e]}function d(e){if(c)setTimeout(d,0,e);else{var t=l[e];if(t){c=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(r,n)}}(t)}finally{f(e),c=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,r(1),r(0))},function(e,t,r){"use strict";r.r(t);var n={};r.r(n),r.d(n,"debounce",(function(){return g})),r.d(n,"throttle",(function(){return m})),r.d(n,"keyEach",(function(){return v})),r.d(n,"keyMap",(function(){return b})),r.d(n,"get",(function(){return j})),r.d(n,"defaultValue",(function(){return T})),r.d(n,"isUndefined",(function(){return w})),r.d(n,"isNotUndefined",(function(){return S})),r.d(n,"isArray",(function(){return k})),r.d(n,"isBoolean",(function(){return C})),r.d(n,"isString",(function(){return P})),r.d(n,"isNotString",(function(){return O})),r.d(n,"isObject",(function(){return R})),r.d(n,"isFunction",(function(){return E})),r.d(n,"isNumber",(function(){return M})),r.d(n,"clone",(function(){return $})),r.d(n,"cleanObject",(function(){return I})),r.d(n,"combineKeyArray",(function(){return L})),r.d(n,"repeat",(function(){return D})),r.d(n,"html",(function(){return X})),r.d(n,"CSS_TO_STRING",(function(){return Y})),r.d(n,"STRING_TO_CSS",(function(){return A})),r.d(n,"OBJECT_TO_PROPERTY",(function(){return _})),r.d(n,"OBJECT_TO_CLASS",(function(){return B}));var i={};r.r(i),r.d(i,"round",(function(){return U})),r.d(i,"degreeToRadian",(function(){return H})),r.d(i,"radianToDegree",(function(){return Q})),r.d(i,"getXInCircle",(function(){return Z})),r.d(i,"getYInCircle",(function(){return K})),r.d(i,"getXYInCircle",(function(){return J})),r.d(i,"getDist",(function(){return W})),r.d(i,"calculateAngle",(function(){return ee})),r.d(i,"uuid",(function(){return re})),r.d(i,"uuidShort",(function(){return ne})),r.d(i,"cubicBezier",(function(){return ae})),r.d(i,"getGradientLine",(function(){return se}));var a={};r.r(a),r.d(a,"ReverseXyz",(function(){return Ee})),r.d(a,"ReverseRGB",(function(){return Me})),r.d(a,"XYZtoRGB",(function(){return $e})),r.d(a,"LABtoXYZ",(function(){return Ie})),r.d(a,"PivotXyz",(function(){return Le})),r.d(a,"XYZtoLAB",(function(){return De})),r.d(a,"LABtoRGB",(function(){return Ne}));var s={};r.r(s),r.d(s,"RGBtoHSV",(function(){return Fe})),r.d(s,"RGBtoCMYK",(function(){return Xe})),r.d(s,"RGBtoHSL",(function(){return Ye})),r.d(s,"c",(function(){return Ae})),r.d(s,"gray",(function(){return _e})),r.d(s,"RGBtoSimpleGray",(function(){return Be})),r.d(s,"RGBtoGray",(function(){return Ve})),r.d(s,"brightness",(function(){return Ge})),r.d(s,"RGBtoYCrCb",(function(){return qe})),r.d(s,"PivotRGB",(function(){return ze})),r.d(s,"RGBtoXYZ",(function(){return Ue})),r.d(s,"RGBtoLAB",(function(){return He}));var o={};r.r(o),r.d(o,"HUEtoRGB",(function(){return Qe})),r.d(o,"HSLtoHSV",(function(){return Ze})),r.d(o,"HSLtoRGB",(function(){return Ke}));var u={};r.r(u),r.d(u,"matches",(function(){return We})),r.d(u,"convertMatches",(function(){return et})),r.d(u,"convertMatchesArray",(function(){return tt})),r.d(u,"reverseMatches",(function(){return rt})),r.d(u,"trim",(function(){return it})),r.d(u,"parse",(function(){return at})),r.d(u,"parseGradient",(function(){return st}));var l={};r.r(l),r.d(l,"format",(function(){return lt})),r.d(l,"hex",(function(){return ct})),r.d(l,"rgb",(function(){return pt})),r.d(l,"hsl",(function(){return ht}));var c={};r.r(c),r.d(c,"randomNumber",(function(){return ft})),r.d(c,"random",(function(){return dt}));var p={};r.r(p),r.d(p,"CMYKtoRGB",(function(){return gt}));var h={};r.r(h),r.d(h,"HSVtoRGB",(function(){return mt})),r.d(h,"HSVtoHSL",(function(){return vt}));var f={};r.r(f),r.d(f,"YCrCbtoRGB",(function(){return yt}));var d={};function g(e,t){var r=void 0;return function(n,i,a,s,o){r&&clearTimeout(r),r=setTimeout((function(){e(n,i,a,s,o)}),t||300)}}function m(e,t){var r=void 0;return function(n,i,a,s,o){r||(r=setTimeout((function(){e(n,i,a,s,o),r=null}),t||300))}}function v(e,t){Object.keys(e).forEach((r,n)=>{t(r,e[r],n)})}function b(e,t){return Object.keys(e).map((r,n)=>t(r,e[r],n))}function j(e,t,r){var n=T(e[t],t);return E(r)?r(n):n}function T(e,t){return void 0===e?t:e}function w(e){return null==e}function S(e){return!1===w(e)}function k(e){return Array.isArray(e)}function C(e){return"boolean"==typeof e}function P(e){return"string"==typeof e}function O(e){return!1===P(e)}function R(e){return"object"==typeof e&&!k(e)&&!M(e)&&!P(e)&&null!==e}function E(e){return"function"==typeof e}function M(e){return"number"==typeof e}function $(e){return JSON.parse(JSON.stringify(e))}function I(e){var t={};return Object.keys(e).filter(t=>!!e[t]).forEach(r=>{t[r]=e[r]}),t}function L(e){return Object.keys(e).forEach(t=>{Array.isArray(e[t])&&(e[t]=e[t].join(", "))}),e}function D(e){return[...Array(e)]}r.r(d),r.d(d,"interpolateRGB",(function(){return bt})),r.d(d,"interpolateRGBObject",(function(){return xt})),r.d(d,"scale",(function(){return jt})),r.d(d,"blend",(function(){return Tt})),r.d(d,"mix",(function(){return wt})),r.d(d,"contrast",(function(){return St})),r.d(d,"contrastColor",(function(){return kt})),r.d(d,"gradient",(function(){return Ct})),r.d(d,"scaleHSV",(function(){return Pt})),r.d(d,"scaleH",(function(){return Ot})),r.d(d,"scaleS",(function(){return Rt})),r.d(d,"scaleV",(function(){return Et}));const N=/\<(\w*)([^\>]*)\/\>/gim,F={image:!0,input:!0,br:!0,path:!0},X=(e,...t)=>{var r=e.map((e,r)=>{var n=t[r]||"";return E(n)&&(n=n()),k(n)||(n=[n]),e+(n=n.map(e=>R(e)&&!k(e)?Object.keys(e).map(t=>`${t}="${e[t]}"`).join(" "):e).join(""))}).join("");return r=r.replace(N,(function(e,t){return F[t.toLowerCase()]?e:e.replace("/>",`></${t}>`)}))};function Y(e,t=""){var r=e;return Object.keys(r).filter(e=>r[e]).map(e=>`${e}: ${r[e]}`).join(";"+t)}function A(e){var t={};return(e+="").split(";").forEach(e=>{var[r,...n]=e.split(":").map(e=>e.trim());""!=r&&(t[r]=n.join(":"))}),t}function _(e){return Object.keys(e).map(t=>"class"===t&&R(e[t])?`${t}="${B(e[t])}"`:C(e[t])?e[t]?t:"":`${t}="${e[t]}"`).join(" ")}function B(e){return Object.keys(e).filter(t=>e[t]).map(e=>e).join(" ")}function V(e,t){if(P(t)){var[r,n,i,a]=t.split(":");return 3600*(r=parseInt(r,10))+60*(n=parseInt(n,10))+(i=parseInt(i,10))+(a=parseInt(a,10))*(1/e)}return M(t)?t/e:0}function G(e,t){var r=Math.floor(t/3600),n=Math.floor(t/60%60),i=Math.floor(t%60),a=Math.round((t-Math.floor(t))*e);return a===e&&(a=0,60===(i+=1)&&60===(n+=1)&&(r+=1)),[r,n,i,a].map(e=>(e+"").padStart(2,"0")).join(":")}function q(e,t,r=null){return G(e,V(e,t)-V(e,r))}function z(e){var t={id:0,start:0,speed:e.speed||1,elapsed:e.elapsed||0,duration:e.duration||0,iterationStartCount:1,iterationCount:e.iterationCount||Number.MAX_SAFE_INTEGER,direction:e.direction||"normal",log:[],logIndex:0,tick:e.tick||(()=>{}),startCallback:e.start||(()=>{}),endCallback:e.end||(()=>{}),firstCallback:e.first||(()=>{}),lastCallback:e.last||(()=>{})};const r=e=>(()=>"normal"===t.direction||"reverse"!==t.direction&&("alternate"===t.direction?t.iterationStartCount%2==1:"alternate-reverse"===t.direction?t.iterationStartCount%2==0:void 0))()?e:1-e,n=e=>{var n=!1;null===t.start&&(t.start=e,n=!0);const s=e-t.start;t.elapsed+=s*t.speed,t.start=e,t.elapsed>t.duration&&(t.elapsed=t.duration);var o=r(t.elapsed/t.duration)*t.duration;n&&t.startCallback(o,t),t.log[t.logIndex++]={elapsed:o,dt:t.lastTime-o},t.lastTime=o,t.tick(o,t),t.elapsed===t.duration?a():i()},i=()=>{t.id=requestAnimationFrame(n)},a=()=>{t.endCallback(t.elapsed,t),t.iterationStartCount++,t.iterationStartCount>t.iterationCount?(t.lastCallback(t.elapsed,t),cancelAnimationFrame(t.id)):(t.start=null,t.elapsed=0,i())},s=e=>{t.elapsed=e,t.tick(t.elapsed,t)};return{play:(e={})=>{t.start=null,t.iterationStartCount=1,t.log=[],t.lastTime=0,t.logIndex=0,M(e.elapsed)&&(t.elapsed=e.elapsed),M(e.speed)&&(t.speed=e.speed),M(e.duration)&&(t.duration=e.duration),M(e.iterationCount)&&(t.iterationCount=e.iterationCount||Number.MAX_SAFE_INTEGER),P(e.direction)&&(t.direction=e.direction),E(e.tick)&&(t.tick=e.tick),E(e.start)&&(t.startCallback=e.start),E(e.end)&&(t.endCallback=e.end),E(e.first)&&(t.firstCallback=e.first),E(e.last)&&(t.lastCallback=e.last),t.firstCallback(t.elapsed,t),i()},stop:()=>{cancelAnimationFrame(t.id)},tick:n,first:e=>{s(0)},last:e=>{s(t.duration)},seek:s,timer:t}}function U(e,t){return t=w(t)?1:t,Math.round(e*t)/t}function H(e){return e*Math.PI/180}function Q(e){var t=180*e/Math.PI;return t<0&&(t=360+t),t}function Z(e,t,r=0){return r+t*Math.cos(H(e))}function K(e,t,r=0){return r+t*Math.sin(H(e))}function J(e,t,r=0,n=0){return{x:Z(e,t,r),y:K(e,t,n)}}function W(e,t,r=0,n=0){return Math.sqrt(Math.pow(Math.abs(r-e),2)+Math.pow(Math.abs(n-t),2))}function ee(e,t){return Q(Math.atan2(t,e))}const te=/[xy]/g;function re(){var e=(new Date).getTime();return"xxx12-xx-34xx".replace(te,(function(t){var r=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?r:3&r|8).toString(16)}))}function ne(){var e=(new Date).getTime();return"idxxxxxxx".replace(te,(function(t){var r=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?r:3&r|8).toString(16)}))}const ie={B1:function(e){return e*e*e},B2:function(e){return 3*e*e*(1-e)},B3:function(e){return 3*e*(1-e)*(1-e)},B4:function(e){return(1-e)*(1-e)*(1-e)}};function ae(e,t,r,n){var i=t,a=n;return function(e){return 1-(i*ie.B2(e)+a*ie.B3(e)+ie.B4(e))}}function se(e,t){let r=Math.abs(t.width*Math.sin(e))+Math.abs(t.height*Math.cos(e)),n={x:t.x+t.width/2,y:t.y+t.height/2},i=Math.sin(e-Math.PI/2)*r/2,a=Math.cos(e-Math.PI/2)*r/2;return{length:r,center:n,start:{x:n.x-a,y:n.y-i},end:{x:n.x+a,y:n.y+i}}}const oe={linear:!0,ease:!0,"ease-in":!0,"ease-out":!0,"ease-in-out":!0},ue=[[0,0,1,1,"linear",!0],[.25,.1,.25,1,"ease",!0],[.42,0,1,1,"ease-in",!0],[0,0,.58,1,"ease-out",!0],[.47,0,.745,.715,"ease-in-sine"],[.39,.575,.565,1,"ease-out-sine"],[.445,.05,.55,.95,"ease-in-out-sine"],[.55,.085,.68,.53,"ease-in-quad"],[.25,.46,.45,.94,"ease-out-quad"],[.455,.03,.515,.955,"ease-in-out-quad"],[.55,.055,.675,.19,"ease-in-cubic"],[.215,.61,.355,1,"ease-out-cubic"],[.645,.045,.355,1,"ease-in-out-cubic"],[.895,.03,.685,.22,"ease-in-quart"],[.165,.84,.44,1,"ease-out-quart"],[.77,0,.175,1,"ease-in-out-quart"],[.6,.04,.98,.335,"ease-in-circ"],[.075,.82,.165,1,"ease-out-circ"],[.785,.135,.15,.86,"ease-in-out-circ"],[.95,.05,.795,.035,"ease-in-expo"],[.19,1,.22,1,"ease-out-expo"],[1,0,0,1,"ease-in-out-expo"],[.755,.05,.855,.06,"ease-in-quint"],[.23,1,.32,1,"ease-out-quint"],[.86,0,.07,1,"ease-in-out-quint"],[.6,-.28,.735,.045,"ease-in-back"],[.175,.885,.32,1.275,"ease-out-back"],[.68,-.55,.265,1.55,"ease-in-out-back"]],le=e=>{if("string"==typeof e){if(oe[e])return ue.filter(t=>t[4]===e)[0];var t=e.replace("cubic-bezier","").replace("(","").replace(")","").split(",");return t=t.map(e=>parseFloat(e.trim()))}return e},ce=(e,t,r,n)=>{var i=[e,t,r,n];return function(e){return me(i,e)}},pe=(e,t,r)=>{var n=[e,t,r];return function(e){return ve(n,e)}},he=(e,t,r,n,i,a,s,o,u=1e3)=>{for(var l=ce({x:e,y:t},{x:r,y:n},{x:i,y:a},{x:s,y:o}),c=0,p=l(0),h=0;h<=u;h++){var f=l(h/u);c+=W(p.x,p.y,f.x,f.y),p=f}return c},fe=(e,t,r,n,i,a,s=1e3)=>{for(var o=pe({x:e,y:t},{x:r,y:n},{x:i,y:a}),u=0,l=o(0),c=0;c<=s;c++){var p=o(c/s);u+=W(l.x,l.y,p.x,p.y),l=p}return u},de=e=>{var t=le(e),r={x:t[0],y:t[1]},n={x:t[2],y:t[3]};return ce({x:0,y:0},r,n,{x:1,y:1})},ge=(e,t,r)=>({x:e.x+(t.x-e.x)*r,y:e.y+(t.y-e.y)*r}),me=(e,t)=>{var r=ge(e[0],e[1],t),n=ge(e[1],e[2],t),i=ge(e[2],e[3],t),a=ge(r,n,t),s=ge(n,i,t);return ge(a,s,t)},ve=(e,t)=>{var r=ge(e[0],e[1],t),n=ge(e[1],e[2],t);return ge(r,n,t)},ye={center:50,top:0,left:0,right:100,bottom:100};class be{}be.CENTER="center",be.TOP="top",be.RIGHT="right",be.LEFT="left",be.BOTTOM="bottom";const xe=/([\d.]+)(px|pt|fr|r?em|deg|vh|vw|m?s|%|g?rad|turn)/gi;class je{constructor(e="",t=""){if(this.value=e,M(this.value)&&isNaN(this.value))throw new Error("NaN is not able to set");this.unit=t}[Symbol.toPrimitive](e){return"number"==e?this.value:this.toString()}static min(...e){for(var t=e.shift(),r=0,n=e.length;r<n;r++)t.value>e[r].value&&(t=e[r]);return t}static max(...e){for(var t=e.shift(),r=0,n=e.length;r<n;r++)t.value<e[r].value&&(t=e[r]);return t}static string(e){return new je(e+"","")}static number(e){return new je(+e,"number")}static px(e){return new je(+e,"px")}static em(e){return new je(+e,"em")}static percent(e){return new je(+e,"%")}static deg(e){return new je(+e,"deg")}static turn(e){return new je(+e,"turn")}static fr(e){return new je(+e,"fr")}static second(e){return new je(+e,"s")}static ms(e){return new je(+e,"ms")}static var(e){return new je(e+"","--")}static calc(e){return new je(e,"calc")}static parse(e){if(P(e=e||je.number(0))){if((e=e.trim()).indexOf("calc(")>-1)return new je(e.split("calc(")[1].split(")")[0],"calc");var t=e.replace(xe,"$1 $2").split(" ").map(e=>e.trim());return+t[0]==t[0]?new je(+t[0],t[1]):new je(t[0])}if(e instanceof je)return e;if(e.unit){if("%"==e.unit||"percent"==e.unit){var r=0;return S(e.percent)?r=e.percent:S(e.value)&&(r=e.value),je.percent(r)}if("px"==e.unit){r=0;return S(e.px)?r=e.px:S(e.value)&&(r=e.value),je.px(r)}if("em"==e.unit){r=0;return S(e.em)?r=e.em:S(e.value)&&(r=e.value),je.em(r)}if("deg"==e.unit){r=0;return S(e.deg)?r=e.deg:S(e.value)&&(r=e.value),je.deg(r)}if("turn"==e.unit){r=0;return S(e.deg)?r=e.turn:S(e.value)&&(r=e.value),je.turn(r)}if("s"==e.unit){r=0;return S(e.second)?r=e.second:S(e.value)&&(r=e.value),je.second(r)}if("ms"==e.unit){r=0;return S(e.ms)?r=e.ms:S(e.value)&&(r=e.value),je.ms(r)}if("number"==e.unit){r=0;return S(e.value)&&(r=e.value),je.number(r)}if("--"==e.unit){r=0;return S(e.value)&&(r=e.value),je.var(r)}if(""===e.unit||"string"===e.unit){r="";return S(e.str)?r=e.str:S(e.value)&&(r=e.value),je.string(r)}}return je.string(e)}toString(){switch(this.unit){case"string":case"number":return this.value+"";case"var":return`var(--${this.value})`;case"calc":return`calc(${this.value})`;default:return this.value+this.unit}}isUnitType(e){return this.unit===e}isCalc(){return this.isUnitType("calc")}isFr(){return this.isUnitType("fr")}isPercent(){return this.isUnitType("%")}isPx(){return this.isUnitType("px")}isEm(){return this.isUnitType("em")}isDeg(){return this.isUnitType("deg")}isTurn(){return this.isUnitType("turn")}isSecond(){return this.isUnitType("s")}isMs(){return this.isUnitType("ms")}isNumber(){return this.isUnitType("number")}isString(){return this.isUnitType("")}isVar(){return this.isUnitType("--")}isNaN(){return M(this.value)&&isNaN(this.value)}set(e){return this.value=e,this}add(e){return this.value+=+e,this}sub(e){return this.add(-1*e)}mul(e){return this.value*=+e,this}div(e){return this.value/=+e,this}mod(e){return this.value%=+e,this}clone(){return new je(this.value,this.unit)}getUnitName(){return"%"===this.unit?"percent":this.unit}toJSON(){return{value:this.value,unit:this.unit}}rate(e){return e/this.value}stringToPercent(){return S(ye[this.value])?je.percent(ye[this.value]):je.percent(0)}stringToEm(e){return this.stringToPercent().toEm(e)}stringToPx(e){return this.stringToPercent().toPx(e)}toPercent(e,t=16){return this.isPercent()?this.clone():this.isPx()?je.percent(100*this.value/e):this.isEm()?je.percent(this.value*t*100/e):this.isString()?this.stringToPercent(e):this.isDeg()?je.percent(this.value/360*100):void 0}toEm(e,t=16){return this.isPercent()?je.em(this.value/100*e/t):this.isPx()?je.em(this.value/t):this.isEm()?this.clone():this.isString()?this.stringToEm(e):void 0}toPx(e,t=16){return this.isPercent()?je.px(this.value/100*e):this.isPx()?this.clone():this.isEm()?je.px(this.value/100*e/16):this.isString()?this.stringToPx(e):void 0}toDeg(){return this.isDeg()?this.clone():this.isTurn()?je.deg(360*this.value):void 0}toTurn(){return this.isTurn()?this.clone():this.isDeg()?je.turn(this.value/360):void 0}toSecond(){return this.isSecond()?this:this.isMs()?je.second(this.value/1e3):void 0}toMs(){return this.isSecond()?je.ms(1e3*this.value):this.isMs()?this:void 0}to(e,t,r=16){return"px"===e?this.toPx(t,r):"%"===e||"percent"===e?this.toPercent(t,r):"em"===e?this.toEm(t,r):"deg"===e?this.toDeg():"turn"===e?this.toTurn():void 0}toUnit(e){return new je(this.value,e)}calculate(e,t){var r=this[e];return r?r.call(this,t):this}includes(...e){return e.includes(this.value)}round(e){return new je(U(this.value,e),this.unit)}equals(e){return this.is(e.value)&&this.isUnitType(e.unit)}is(e){return this.value===e}}function Te(e,t,r,n="width",i="parent"){var a=null;return r.isPx()?r:("parent"===i?a=je.parse(e.parent().css(n)):"self"===i&&(a=je.parse(e.css(n))),a?r.toPx(a.value):r)}function we(e,t,r,n,i="width",a="parent"){var s=je.parse(r),o=je.parse(n);return(t,r)=>{if(s.equals(o))return s;var n=Te(e,0,s,i,a),u=Te(e,0,o,i,a);return 0===r?n:1===r?u:function(e,t,r,n,i="width",a="parent"){if(r.isPx()&&"px"===n)return r;var s=null;return"parent"===a?s=je.parse(e.parent().css(i)).value:"self"===a&&(s=je.parse(e.css(i)).value),null!=s?r.to(n,s):r}(e,0,je.px(n.value+(u.value-n.value)*t),s.unit,i,a)}}function Se(e,t,r,n){var i=A(r),a=A(n),s=[];return Object.keys(i).forEach(t=>{s.push({key:t,value:we(e,0,i[t],a[t])})}),(e,t)=>{var r={};return s.forEach(n=>{r[n.key]=n.value(e,t)}),Y(r)}}function ke(e){var t=[];return e.layers.length&&e.layers.forEach(e=>{t.push(...ke(e))}),t.push(e),t}je.auto=je.string("auto");class Ce{constructor(e={}){return e instanceof Ce&&(e=e.toJSON()),this.json=this.convert(Object.assign({},this.getDefaultObject(),e)),this.ref=new Proxy(this,{get:(e,t)=>{var r=e[t];return E(r)?(...t)=>r.apply(e,t):r||e.json[t]},set:(e,t,r)=>{if(r&&r.realVal&&E(r.realVal)&&(r=r.realVal()),!this.checkField(t,r))throw new Error(`${r} is invalid as ${t} property value.`);return e.json[t]=r,!0}}),this.ref}getDefaultTitle(){return"Item"}isAttribute(){return!1}get title(){return this.json.name||this.getDefaultTitle()}get id(){return this.json.id}get layers(){return this.json.layers}get parent(){return this.json.parent}recover(){}setCache(){}is(...e){return!!this.json&&e.indexOf(this.json.itemType)>-1}isNot(...e){return!1===this.is(...e)}convert(e){return e.layers.forEach(e=>{e.parent=this.ref}),e}checkField(e,t){return!0}toCloneObject(){return{itemType:this.json.itemType,elementType:this.json.elementType,type:this.json.type,visible:this.json.visible,lock:this.json.lock,selected:this.json.selected,layers:this.json.layers.map(e=>e.clone())}}clone(){var e=new(0,this.constructor)(this.toCloneObject());return e.parent=this.json.parent,e}reset(e){e instanceof Ce&&(e=e.toJSON()),this.json=this.convert({...this.json,...e})}getDefaultObject(e={}){return{layers:[],...e}}add(e){return this.json.layers.push(e),e.parent=this.ref,e}toggle(e,t){w(t)?this.json[e]=!this.json[e]:this.json[e]=!!t}toJSON(){return this.json}get html(){var{elementType:e,id:t,layers:r,itemType:n}=this.json;const i=e||"div";return`\n    <${i} class='element-item ${n}' data-id="${t}">\n      ${r.map(e=>e.html).join("")}\n    </${i}>\n    `}resize(){}copy(){return this.json.parent.copyItem(this.ref)}copyItem(e,t=10){var r=e.clone();r.setScreenX(r.screenX.value+t),r.setScreenY(r.screenY.value+t);for(var n=this.json.layers,i=-1,a=0,s=n.length;a<s;a++)if(n[a]===e){i=a;break}return i>-1&&this.json.layers.splice(i+1,0,r),r}remove(){this.json.parent.removeItem(this.ref)}removeItem(e){for(var t=this.json.layers,r=-1,n=0,i=t.length;n<i;n++)if(t[n]===e){r=n;break}r>-1&&this.json.layers.splice(r,1)}get allLayers(){return[...ke(this.ref)]}searchById(e){if(this.id===e)return this.ref;for(var t=0,r=this.layers.length;t<r;t++){const r=this.layers[t];if(r.id===e)return r;var n=r.searchById(e);if(n)return n}return null}}class Pe extends Ce{isAttribute(){return!0}toCSS(){return{}}toString(){return Y(this.toCSS())}}const Oe={aliceblue:"rgb(240, 248, 255)",antiquewhite:"rgb(250, 235, 215)",aqua:"rgb(0, 255, 255)",aquamarine:"rgb(127, 255, 212)",azure:"rgb(240, 255, 255)",beige:"rgb(245, 245, 220)",bisque:"rgb(255, 228, 196)",black:"rgb(0, 0, 0)",blanchedalmond:"rgb(255, 235, 205)",blue:"rgb(0, 0, 255)",blueviolet:"rgb(138, 43, 226)",brown:"rgb(165, 42, 42)",burlywood:"rgb(222, 184, 135)",cadetblue:"rgb(95, 158, 160)",chartreuse:"rgb(127, 255, 0)",chocolate:"rgb(210, 105, 30)",coral:"rgb(255, 127, 80)",cornflowerblue:"rgb(100, 149, 237)",cornsilk:"rgb(255, 248, 220)",crimson:"rgb(237, 20, 61)",cyan:"rgb(0, 255, 255)",darkblue:"rgb(0, 0, 139)",darkcyan:"rgb(0, 139, 139)",darkgoldenrod:"rgb(184, 134, 11)",darkgray:"rgb(169, 169, 169)",darkgrey:"rgb(169, 169, 169)",darkgreen:"rgb(0, 100, 0)",darkkhaki:"rgb(189, 183, 107)",darkmagenta:"rgb(139, 0, 139)",darkolivegreen:"rgb(85, 107, 47)",darkorange:"rgb(255, 140, 0)",darkorchid:"rgb(153, 50, 204)",darkred:"rgb(139, 0, 0)",darksalmon:"rgb(233, 150, 122)",darkseagreen:"rgb(143, 188, 143)",darkslateblue:"rgb(72, 61, 139)",darkslategray:"rgb(47, 79, 79)",darkslategrey:"rgb(47, 79, 79)",darkturquoise:"rgb(0, 206, 209)",darkviolet:"rgb(148, 0, 211)",deeppink:"rgb(255, 20, 147)",deepskyblue:"rgb(0, 191, 255)",dimgray:"rgb(105, 105, 105)",dimgrey:"rgb(105, 105, 105)",dodgerblue:"rgb(30, 144, 255)",firebrick:"rgb(178, 34, 34)",floralwhite:"rgb(255, 250, 240)",forestgreen:"rgb(34, 139, 34)",fuchsia:"rgb(255, 0, 255)",gainsboro:"rgb(220, 220, 220)",ghostwhite:"rgb(248, 248, 255)",gold:"rgb(255, 215, 0)",goldenrod:"rgb(218, 165, 32)",gray:"rgb(128, 128, 128)",grey:"rgb(128, 128, 128)",green:"rgb(0, 128, 0)",greenyellow:"rgb(173, 255, 47)",honeydew:"rgb(240, 255, 240)",hotpink:"rgb(255, 105, 180)",indianred:"rgb(205, 92, 92)",indigo:"rgb(75, 0, 130)",ivory:"rgb(255, 255, 240)",khaki:"rgb(240, 230, 140)",lavender:"rgb(230, 230, 250)",lavenderblush:"rgb(255, 240, 245)",lawngreen:"rgb(124, 252, 0)",lemonchiffon:"rgb(255, 250, 205)",lightblue:"rgb(173, 216, 230)",lightcoral:"rgb(240, 128, 128)",lightcyan:"rgb(224, 255, 255)",lightgoldenrodyellow:"rgb(250, 250, 210)",lightgreen:"rgb(144, 238, 144)",lightgray:"rgb(211, 211, 211)",lightgrey:"rgb(211, 211, 211)",lightpink:"rgb(255, 182, 193)",lightsalmon:"rgb(255, 160, 122)",lightseagreen:"rgb(32, 178, 170)",lightskyblue:"rgb(135, 206, 250)",lightslategray:"rgb(119, 136, 153)",lightslategrey:"rgb(119, 136, 153)",lightsteelblue:"rgb(176, 196, 222)",lightyellow:"rgb(255, 255, 224)",lime:"rgb(0, 255, 0)",limegreen:"rgb(50, 205, 50)",linen:"rgb(250, 240, 230)",magenta:"rgb(255, 0, 255)",maroon:"rgb(128, 0, 0)",mediumaquamarine:"rgb(102, 205, 170)",mediumblue:"rgb(0, 0, 205)",mediumorchid:"rgb(186, 85, 211)",mediumpurple:"rgb(147, 112, 219)",mediumseagreen:"rgb(60, 179, 113)",mediumslateblue:"rgb(123, 104, 238)",mediumspringgreen:"rgb(0, 250, 154)",mediumturquoise:"rgb(72, 209, 204)",mediumvioletred:"rgb(199, 21, 133)",midnightblue:"rgb(25, 25, 112)",mintcream:"rgb(245, 255, 250)",mistyrose:"rgb(255, 228, 225)",moccasin:"rgb(255, 228, 181)",navajowhite:"rgb(255, 222, 173)",navy:"rgb(0, 0, 128)",oldlace:"rgb(253, 245, 230)",olive:"rgb(128, 128, 0)",olivedrab:"rgb(107, 142, 35)",orange:"rgb(255, 165, 0)",orangered:"rgb(255, 69, 0)",orchid:"rgb(218, 112, 214)",palegoldenrod:"rgb(238, 232, 170)",palegreen:"rgb(152, 251, 152)",paleturquoise:"rgb(175, 238, 238)",palevioletred:"rgb(219, 112, 147)",papayawhip:"rgb(255, 239, 213)",peachpuff:"rgb(255, 218, 185)",peru:"rgb(205, 133, 63)",pink:"rgb(255, 192, 203)",plum:"rgb(221, 160, 221)",powderblue:"rgb(176, 224, 230)",purple:"rgb(128, 0, 128)",rebeccapurple:"rgb(102, 51, 153)",red:"rgb(255, 0, 0)",rosybrown:"rgb(188, 143, 143)",royalblue:"rgb(65, 105, 225)",saddlebrown:"rgb(139, 69, 19)",salmon:"rgb(250, 128, 114)",sandybrown:"rgb(244, 164, 96)",seagreen:"rgb(46, 139, 87)",seashell:"rgb(255, 245, 238)",sienna:"rgb(160, 82, 45)",silver:"rgb(192, 192, 192)",skyblue:"rgb(135, 206, 235)",slateblue:"rgb(106, 90, 205)",slategray:"rgb(112, 128, 144)",slategrey:"rgb(112, 128, 144)",snow:"rgb(255, 250, 250)",springgreen:"rgb(0, 255, 127)",steelblue:"rgb(70, 130, 180)",tan:"rgb(210, 180, 140)",teal:"rgb(0, 128, 128)",thistle:"rgb(216, 191, 216)",tomato:"rgb(255, 99, 71)",turquoise:"rgb(64, 224, 208)",violet:"rgb(238, 130, 238)",wheat:"rgb(245, 222, 179)",white:"rgb(255, 255, 255)",whitesmoke:"rgb(245, 245, 245)",yellow:"rgb(255, 255, 0)",yellowgreen:"rgb(154, 205, 50)",transparent:"rgba(0, 0, 0, 0)"};var Re={isColorName:function(e){return!!Oe[e]},getColorByName:function(e){return Oe[e]}};function Ee(e){return Math.pow(e,3)>.008856?Math.pow(e,3):(e-16/116)/7.787}function Me(e){return e>.0031308?1.055*Math.pow(e,1/2.4)-.055:12.92*e}function $e(e,t,r){if(1==arguments.length)var{x:e,y:t,z:r}=arguments[0];let n=e/100,i=t/100,a=r/100,s=3.2406*n+-1.5372*i+-.4986*a,o=-.9689*n+1.8758*i+.0415*a,u=.0557*n+-.204*i+1.057*a;return s=Me(s),o=Me(o),u=Me(u),{r:U(255*s),g:U(255*o),b:U(255*u)}}function Ie(e,t,r){if(1==arguments.length)var{l:e,a:t,b:r}=arguments[0];let n=(e+16)/116,i=t/500+n,a=n-r/200;return n=Ee(n),{x:95.047*(i=Ee(i)),y:100*n,z:108.883*(a=Ee(a))}}function Le(e){return e>.008856?Math.pow(e,1/3):(7.787*e+16)/116}function De(e,t,r){if(1==arguments.length)var{x:e,y:t,z:r}=arguments[0];let n=e/95.047,i=t/100,a=r/108.883;return n=Le(n),{l:116*(i=Le(i))-16,a:500*(n-i),b:200*(i-(a=Le(a)))}}function Ne(e,t,r){if(1==arguments.length)var{l:e,a:t,b:r}=arguments[0];return $e(Ie(e,t,r))}function Fe(e,t,r){if(1==arguments.length)var{r:e,g:t,b:r}=arguments[0];const n=e/255,i=t/255,a=r/255,s=Math.max(n,i,a),o=s-Math.min(n,i,a);var u=0;0==o?u=0:s==n?u=(i-a)/o%6*60:s==i?u=60*((a-n)/o+2):s==a&&(u=60*((n-i)/o+4)),u<0&&(u=360+u);return{h:u,s:0==s?0:o/s,v:s}}function Xe(e,t,r){if(1==arguments.length)var{r:e,g:t,b:r}=arguments[0];const n=e/255,i=t/255,a=r/255,s=1-Math.max(n,i,a);return{c:(1-n-s)/(1-s),m:(1-i-s)/(1-s),y:(1-a-s)/(1-s),k:s}}function Ye(e,t,r){if(1==arguments.length)var{r:e,g:t,b:r}=arguments[0];e/=255,t/=255,r/=255;var n,i,a=Math.max(e,t,r),s=Math.min(e,t,r),o=(a+s)/2;if(a==s)n=i=0;else{var u=a-s;switch(i=o>.5?u/(2-a-s):u/(a+s),a){case e:n=(t-r)/u+(t<r?6:0);break;case t:n=(r-e)/u+2;break;case r:n=(e-t)/u+4}n/=6}return{h:U(360*n),s:U(100*i),l:U(100*o)}}function Ae(e,t,r){if(1==arguments.length)var{r:e,g:t,b:r}=arguments[0];return _e((e+t+r)/3>90?0:255)}function _e(e){return{r:e,g:e,b:e}}function Be(e,t,r){if(1==arguments.length)var{r:e,g:t,b:r}=arguments[0];return _e(Math.ceil((e+t+r)/3))}function Ve(e,t,r){if(1==arguments.length)var{r:e,g:t,b:r}=arguments[0];return _e(qe(e,t,r).y)}function Ge(e,t,r){return Math.ceil(.2126*e+.7152*t+.0722*r)}function qe(e,t,r){if(1==arguments.length)var{r:e,g:t,b:r}=arguments[0];const n=Ge(e,t,r);return{y:n,cr:.713*(e-n),cb:.564*(r-n)}}function ze(e){return 100*(e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92)}function Ue(e,t,r){if(1==arguments.length)var{r:e,g:t,b:r}=arguments[0];let n=e/255,i=t/255,a=r/255;return{x:.4124*(n=ze(n))+.3576*(i=ze(i))+.1805*(a=ze(a)),y:.2126*n+.7152*i+.0722*a,z:.0193*n+.1192*i+.9505*a}}function He(e,t,r){if(1==arguments.length)var{r:e,g:t,b:r}=arguments[0];return De(Ue(e,t,r))}function Qe(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function Ze(e,t,r){if(1==arguments.length)var{h:e,s:t,l:r}=arguments[0];const n=Ke(e,t,r);return Fe(n.r,n.g,n.b)}function Ke(e,t,r){if(1==arguments.length)var{h:e,s:t,l:r}=arguments[0];var n,i,a;if(e/=360,r/=100,0==(t/=100))n=i=a=r;else{var s=r<.5?r*(1+t):r+t-r*t,o=2*r-s;n=Qe(o,s,e+1/3),i=Qe(o,s,e),a=Qe(o,s,e-1/3)}return{r:U(255*n),g:U(255*i),b:U(255*a)}}const Je=/(#(?:[\da-f]{3}){1,2}|rgb\((?:\s*\d{1,3},\s*){2}\d{1,3}\s*\)|rgba\((?:\s*\d{1,3},\s*){3}\d*\.?\d+\s*\)|hsl\(\s*\d{1,3}(?:,\s*\d{1,3}%){2}\s*\)|hsla\(\s*\d{1,3}(?:,\s*\d{1,3}%){2},\s*\d*\.?\d+\s*\)|([\w_\-]+))/gi;function We(e){const t=e.match(Je);let r=[];if(!t)return r;for(var n=0,i=t.length;n<i;n++)if(t[n].indexOf("#")>-1||t[n].indexOf("rgb")>-1||t[n].indexOf("hsl")>-1)r.push({color:t[n]});else{var a=Re.getColorByName(t[n]);a&&r.push({color:t[n],nameColor:a})}var s={next:0};return r.forEach(t=>{const r=e.indexOf(t.color,s.next);t.startIndex=r,t.endIndex=r+t.color.length,s.next=t.endIndex}),r}function et(e){const t=We(e);return t.forEach((t,r)=>{e=e.replace(t.color,"@"+r)}),{str:e,matches:t}}function tt(e,t=","){const r=et(e);return r.str.split(t).map((e,t)=>(e=it(e),r.matches[t]&&(e=e.replace("@"+t,r.matches[t].color)),e))}function rt(e,t){return t.forEach((t,r)=>{e=e.replace("@"+r,t.color)}),e}const nt=/^\s+|\s+$/g;function it(e){return e.replace(nt,"")}function at(e){if(P(e)){if(Re.isColorName(e)&&(e=Re.getColorByName(e)),e.indexOf("rgb(")>-1){for(var t=0,r=(i=e.replace("rgb(","").replace(")","").split(",")).length;t<r;t++)i[t]=parseInt(it(i[t]),10);var n={type:"rgb",r:i[0],g:i[1],b:i[2],a:1};return n={...n,...Ye(n)}}if(e.indexOf("rgba(")>-1){for(t=0,r=(i=e.replace("rgba(","").replace(")","").split(",")).length;t<r;t++)i[t]=r-1==t?parseFloat(it(i[t])):parseInt(it(i[t]),10);n={type:"rgb",r:i[0],g:i[1],b:i[2],a:i[3]};return n={...n,...Ye(n)}}if(e.indexOf("hsl(")>-1){for(t=0,r=(i=e.replace("hsl(","").replace(")","").split(",")).length;t<r;t++)i[t]=parseFloat(it(i[t]));n={type:"hsl",h:i[0],s:i[1],l:i[2],a:1};return n={...n,...Ke(n)}}if(e.indexOf("hsla(")>-1){for(t=0,r=(i=e.replace("hsla(","").replace(")","").split(",")).length;t<r;t++)i[t]=r-1==t?parseFloat(it(i[t])):parseInt(it(i[t]),10);n={type:"hsl",h:i[0],s:i[1],l:i[2],a:i[3]};return n={...n,...Ke(n)}}if(0==e.indexOf("#")){var i=[];if(3==(e=e.replace("#","")).length)for(t=0,r=e.length;t<r;t++){var a=e.substr(t,1);i.push(parseInt(a+a,16))}else for(t=0,r=e.length;t<r;t+=2)i.push(parseInt(e.substr(t,2),16));n={type:"hex",r:i[0],g:i[1],b:i[2],a:1};return n={...n,...Ye(n)}}}else if(M(e)){if(0<=e&&e<=16777215){n={type:"hex",r:(16711680&e)>>16,g:(65280&e)>>8,b:(255&e)>>0,a:1};return n={...n,...Ye(n)}}if(0<=e&&e<=4294967295){n={type:"hex",r:(4278190080&e)>>24,g:(16711680&e)>>16,b:(65280&e)>>8,a:(255&e)/255};return n={...n,...Ye(n)}}}return e}function st(e){P(e)&&(e=tt(e));const t=(e=e.map(e=>{if(P(e)){const t=et(e);let r=it(t.str).split(" ");return r[1]?r[1].indexOf("%")>-1?r[1]=parseFloat(r[1].replace(/%/,""))/100:r[1]=parseFloat(r[1]):r[1]="*",r[0]=rt(r[0],t.matches),r}if(Array.isArray(e))return e[1]?P(e[1])&&(e[1].indexOf("%")>-1?e[1]=parseFloat(e[1].replace(/%/,""))/100:e[1]=+e[1]):e[1]="*",[...e]})).filter(e=>"*"===e[1]).length;if(t>0){const r=(1-e.filter(e=>"*"!=e[1]&&1!=e[1]).map(e=>e[1]).reduce((e,t)=>e+t,0))/t;e.forEach((t,n)=>{"*"==t[1]&&n>0&&(e.length-1==n||(t[1]=r))})}return e}class ot extends Pe{static parse(e){return new ot(e)}static parseStyle(e){var t=[];if(!e)return t;var r=et(e);return t=r.str.split(",").filter(e=>e.trim()).map(e=>{var t=e.split(" "),n=t.filter(e=>"inset"===e),i=t.filter(e=>e.includes("@")).map(e=>r.matches[+e.replace("@","")].color),a=t.filter(e=>"inset"!==e&&!e.includes("@"));return ot.parse({inset:!!n.length,color:i[0]||"rgba(0, 0, 0, 1)",offsetX:je.parse(a[0]||"0px"),offsetY:je.parse(a[1]||"0px"),blurRadius:je.parse(a[2]||"0px"),spreadRadius:je.parse(a[3]||"0px")})})}static join(e){return e.map(e=>ot.parse(e)).join(", ")}getDefaultObject(){return super.getDefaultObject({itemType:"box-shadow",inset:!1,offsetX:je.px(0),offsetY:je.px(0),blurRadius:je.px(0),spreadRadius:je.px(0),color:"rgba(0, 0, 0, 1)"})}toCloneObject(){var e=this.json;return{...super.toCloneObject(),inset:e.inset,offsetX:e.offsetX+"",offsetY:e.offsetY+"",blurRadius:e.blurRadius+"",spreadRadius:e.spreadRadius+"",color:e.color}}convert(e){return(e=super.convert(e)).offsetX=je.parse(e.offsetX),e.offsetY=je.parse(e.offsetY),e.blurRadius=je.parse(e.blurRadius),e.spreadRadius=je.parse(e.spreadRadius),e}toCSS(){return{"box-shadow":this.toString()}}toString(){var e=this.json;return`${e.inset?"inset ":""}${e.offsetX} ${e.offsetY} ${e.blurRadius} ${e.spreadRadius} ${e.color}`}}function ut(e,t,r,n){return(e,t)=>1===t?n:r}function lt(e,t,r="rgba(0, 0, 0, 0)"){return Array.isArray(e)&&(e={r:e[0],g:e[1],b:e[2],a:e[3]}),"hex"==t?ct(e):"rgb"==t?pt(e,r):"hsl"==t?ht(e):e}function ct(e){Array.isArray(e)&&(e={r:e[0],g:e[1],b:e[2],a:e[3]});var t=e.r.toString(16);e.r<16&&(t="0"+t);var r=e.g.toString(16);e.g<16&&(r="0"+r);var n=e.b.toString(16);return e.b<16&&(n="0"+n),`#${t}${r}${n}`}function pt(e,t="rgba(0, 0, 0, 0)"){if(k(e)&&(e={r:e[0],g:e[1],b:e[2],a:e[3]}),!w(e))return 1==e.a||w(e.a)?isNaN(e.r)?t:`rgb(${e.r},${e.g},${e.b})`:`rgba(${e.r},${e.g},${e.b},${e.a})`}function ht(e){return k(e)&&(e={r:e[0],g:e[1],b:e[2],a:e[3]}),1==e.a||w(e.a)?`hsl(${e.h},${e.s}%,${e.l}%)`:`hsla(${e.h},${e.s}%,${e.l}%,${e.a})`}function ft(e,t){return Math.floor(Math.random()*(t-e+1))+e}function dt(){return pt({r:ft(0,255),g:ft(0,255),b:ft(0,255)})}function gt(e,t,r,n){if(1==arguments.length)var{c:e,m:t,y:r,k:n}=arguments[0];return{r:255*(1-e)*(1-n),g:255*(1-t)*(1-n),b:255*(1-r)*(1-n)}}function mt(e,t,r){if(1==arguments.length)var{h:e,s:t,v:r}=arguments[0];var n=e,i=r;n>=360&&(n=0);const a=t*i,s=a*(1-Math.abs(n/60%2-1)),o=i-a;let u=[];return 0<=n&&n<60?u=[a,s,0]:60<=n&&n<120?u=[s,a,0]:120<=n&&n<180?u=[0,a,s]:180<=n&&n<240?u=[0,s,a]:240<=n&&n<300?u=[s,0,a]:300<=n&&n<360&&(u=[a,0,s]),{r:U(255*(u[0]+o)),g:U(255*(u[1]+o)),b:U(255*(u[2]+o))}}function vt(e,t,r){if(1==arguments.length)var{h:e,s:t,v:r}=arguments[0];const n=mt(e,t,r);return Ye(n.r,n.g,n.b)}function yt(e,t,r,n){if(1==arguments.length){var{y:e,cr:t,cb:r,bit:n}=arguments[0];n=n||0}const i=e+1.402*(t-n),a=e-.344*(r-n)-.714*(t-n),s=e+1.772*(r-n);return{r:Math.ceil(i),g:Math.ceil(a),b:Math.ceil(s)}}function bt(e,t,r=.5,n="hex"){var i=xt(e,t,r);return lt(i,i.a<1?"rgb":n)}function xt(e,t,r=.5){return{r:U(e.r+(t.r-e.r)*r),g:U(e.g+(t.g-e.g)*r),b:U(e.b+(t.b-e.b)*r),a:U(e.a+(t.a-e.a)*r,100)}}function jt(e,t=5){if(!e)return[];P(e)&&(e=tt(e));for(var r=(e=e||[]).length,n=[],i=0;i<r-1;i++)for(var a=0;a<t;a++)n.push(Tt(e[i],e[i+1],a/t));return n}function Tt(e,t,r=.5,n="hex"){return bt(at(e),at(t),r,n)}function wt(e,t,r=.5,n="hex"){return Tt(e,t,r,n)}function St(e){return e=at(e),(Math.round(299*e.r)+Math.round(587*e.g)+Math.round(114*e.b))/1e3}function kt(e){return St(e)>=128?"black":"white"}function Ct(e,t=10){let r=[],n=t-((e=st(e)).length-1),i=n;for(var a=1,s=e.length;a<s;a++){var o=e[a-1][0],u=e[a][0],l=1==a?e[a][1]:e[a][1]-e[a-1][1],c=a==e.length-1?i:Math.floor(l*n);r=r.concat(jt([o,u],c),[u]),i-=c}return r}function Pt(e,t="h",r=9,n="rgb",i=0,a=1,s=100){for(var o=Fe(at(e)),u=(a-i)*s/r,l=[],c=1;c<=r;c++)o[t]=Math.abs((s-u*c)/s),l.push(lt(mt(o),n));return l}function Ot(e,t=9,r="rgb",n=0,i=360){return Pt(e,"h",t,r,n,i,1)}function Rt(e,t=9,r="rgb",n=0,i=1){return Pt(e,"s",t,r,n,i,100)}function Et(e,t=9,r="rgb",n=0,i=1){return Pt(e,"v",t,r,n,i,100)}jt.parula=function(e){return jt(["#352a87","#0f5cdd","#00b5a6","#ffc337","#fdff00"],e)},jt.jet=function(e){return jt(["#00008f","#0020ff","#00ffff","#51ff77","#fdff00","#ff0000","#800000"],e)},jt.hsv=function(e){return jt(["#ff0000","#ffff00","#00ff00","#00ffff","#0000ff","#ff00ff","#ff0000"],e)},jt.hot=function(e){return jt(["#0b0000","#ff0000","#ffff00","#ffffff"],e)},jt.pink=function(e){return jt(["#1e0000","#bd7b7b","#e7e5b2","#ffffff"],e)},jt.bone=function(e){return jt(["#000000","#4a4a68","#a6c6c6","#ffffff"],e)},jt.copper=function(e){return jt(["#000000","#3d2618","#9d623e","#ffa167","#ffc77f"],e)};var Mt={...c,...l,...i,...d,...u,...f,...s,...p,...h,...o,...a,...n};function $t(e,t,r,n){var i=Mt.parse(r),a=Mt.parse(n);return(e,t)=>0===t?r:1===t?n:bt(i,a,e,"rgb")}function It(e,t,r,n){for(var i=ot.parseStyle(r),a=ot.parseStyle(n),s=Math.max(i.length,a.length),o=[],u=0,l=s;u<l;u++){var c=i[u]||ot.parseStyle("0px 0px 0px 0px rgba(0, 0, 0, 0)")[0],p=a[u]||ot.parseStyle("0px 0px 0px 0px rgba(0, 0, 0, 0)")[0];o.push({inset:ut(0,0,c.inset,p.inset),offsetX:we(e,0,c.offsetX,p.offsetX),offsetY:we(e,0,c.offsetY,p.offsetY),blurRadius:we(e,0,c.blurRadius,p.blurRadius),spreadRadius:we(e,0,c.spreadRadius,p.spreadRadius),color:$t(0,0,c.color,p.color)})}return(e,t)=>ot.join(o.map(r=>({inset:r.inset(e,t),offsetX:r.offsetX(e,t),offsetY:r.offsetY(e,t),blurRadius:r.blurRadius(e,t),spreadRadius:r.spreadRadius(e,t),color:r.color(e,t)})))}function Lt(e,t,r,n){return ut(0,0,r,n)}const Dt=(e=1,t="end")=>(e=+e,function(r){var n=1/e;return"start"==t?n*Math.ceil(r/n):"end"==t?n*Math.floor(r/n):void 0});function Nt(){return Dt(1,"start")}function Ft(){return Dt(1,"end")}var Xt=function(){return e=>Math.pow(2,-10*e)*Math.sin(5*(e-.1)*Math.PI)+1},Yt={step:function(e=1,t="end"){return Dt(e,t)},"step-start":Nt,"step-end":Ft,stepStart:Nt,stepEnd:Ft,"ease-out-elastic":Xt,easeOutElastic:Xt};function At(e,t,r){return r.toDeg()}function _t(e,t,r,n){var i=je.parse(r),a=je.parse(n);return(e,t)=>{var r=At(0,0,i),n=At(0,0,a);return 0===t?r:1===t?n:je.deg(r.value+(n.value-r.value)*e).to(i.unit)}}class Bt extends Pe{static parse(e){return new Bt(e)}static parseStyle(e){var t=et(e);return t.str.split(",").filter(e=>e.trim()).map(e=>{var r=e.split(" "),n=r.filter(e=>e.includes("@")).map(e=>t.matches[+e.replace("@","")].color),i=r.filter(e=>!e.includes("@"));return Bt.parse({color:n[0]||"rgba(0, 0, 0, 1)",offsetX:je.parse(i[0]||"0px"),offsetY:je.parse(i[1]||"0px"),blurRadius:je.parse(i[2]||"0px")})})}static join(e){return e.map(e=>Bt.parse(e)).join(", ")}getDefaultObject(){return super.getDefaultObject({itemType:"text-shadow",offsetX:je.px(0),offsetY:je.px(0),blurRadius:je.px(0),color:"rgba(0, 0, 0, 1)"})}toCloneObject(){return{...super.toCloneObject(),offsetX:this.json.offsetX+"",offsetY:this.json.offsetY+"",blurRadius:this.json.blurRadius+"",color:this.json.color}}convert(e){return(e=super.convert(e)).offsetX=je.parse(e.offsetX),e.offsetY=je.parse(e.offsetY),e.blurRadius=je.parse(e.blurRadius),e}toCSS(){return{"text-shadow":this.toString()}}toString(){var e=this.json;return`${e.offsetX} ${e.offsetY} ${e.blurRadius} ${e.color}`}}function Vt(e,t,r,n){for(var i=Bt.parseStyle(r),a=Bt.parseStyle(n),s=Math.max(i.length,a.length),o=[],u=0,l=s;u<l;u++){var c=i[u]||Bt.parseStyle("0px 0px 0px rgba(0, 0, 0, 0)")[0],p=a[u]||Bt.parseStyle("0px 0px 0px rgba(0, 0, 0, 0)")[0];o.push({offsetX:we(e,0,c.offsetX,p.offsetX,"width","self"),offsetY:we(e,0,c.offsetY,p.offsetY,"height","self"),blurRadius:we(e,0,c.blurRadius,p.blurRadius,"radius"),color:$t(0,0,c.color,p.color)})}return(e,t)=>Bt.join(o.map(r=>({offsetX:r.offsetX(e,t),offsetY:r.offsetY(e,t),blurRadius:r.blurRadius(e,t),color:r.color(e,t)})))}class Gt extends Pe{getDefaultObject(e={}){return super.getDefaultObject({itemType:"image-resource",type:"image",...e})}isGradient(){return!1}isLinear(){return!1}isRadial(){return!1}isConic(){return!1}isStatic(){return!1}isImage(){return!1}hasAngle(){return!1}isUrl(){return!1}isFile(){return!1}isAttribute(){return!0}toString(){return"none"}}class qt extends Ce{getDefaultObject(){return super.getDefaultObject({cut:!1,percent:0,unit:"%",px:0,em:0,color:"rgba(0, 0, 0, 0)",prevColorStep:null})}toCloneObject(){return{...super.toCloneObject(),cut:this.json.cut,percent:this.json.percent,unit:this.json.unit,px:this.json.px,em:this.json.em,color:this.json.color}}on(){this.json.cut=!0}off(){this.json.cut=!1}toggle(){this.json.cut=!this.json.cut}getUnit(){return"%"==this.json.unit?"percent":this.json.unit}add(e){var t=this.getUnit();return this.json[t]+=+e,this}sub(e){var t=this.getUnit();return this.json[t]-=+e,this}mul(e){var t=this.getUnit();return this.json[t]*=+e,this}div(e){var t=this.getUnit();return this.json[t]/=+e,this}mod(e){var t=this.getUnit();return this.json[t]%=+e,this}get isPx(){return"px"==this.json.unit}get isPercent(){return"%"==this.json.unit||"percent"===this.json.unit}get isEm(){return"em"==this.json.unit}toLength(e){return je.parse(this.json)}getPrevLength(){return this.json.prevColorStep?this.json.prevColorStep.toLength():""}toString(){var e=this.json.cut?this.getPrevLength():"";return`${this.json.color} ${e} ${this.toLength()}`}reset(e){super.reset(e),this.parent()&&this.parent().sortColorStep()}static parse(e){let t=[];const r=et(e);var n=r.str.split(" ").filter(e=>e.trim());const i=+n[0].replace("@",""),a=r.matches[i].color;if(1===n.length)t.push(new qt({color:a,unit:"%",percent:0}));else if(2===n.length){const e=je.parse(n[1]);let r={unit:e.unit};e.isPercent()?r.percent=e.value:e.isPx()?r.px=e.value:e.isEm()&&(r.em=e.value),t.push(new qt({color:a,...r}))}else 3===n.length&&[1,2].forEach(e=>{const r=je.parse(n[e]);let i={unit:r.unit};r.isPercent()?i.percent=r.value:r.isPx()?i.px=r.value:r.isEm()&&(i.em=r.value),t.push(new qt({color:a,...i}))});return t}}const zt={"to top":0,"to top right":45,"to right":90,"to bottom right":135,"to bottom":180,"to bottom left":225,"to left":270,"to top left":315};class Ut extends Gt{isGradient(){return!0}toString(){return"none"}getDefaultObject(e={}){return super.getDefaultObject({type:"gradient",colorsteps:[],...e})}toCloneObject(){return{...super.toCloneObject(),colorsteps:this.json.colorsteps.map(e=>e.clone())}}convert(e){return e.colorsteps=e.colorsteps.map(e=>new qt(e)),e}calculateAngle(){var e=this.json.angle;return w(zt[e])?e:zt[e]||0}addColorStep(e,t=!0){return this.json.colorsteps.push(e),t&&this.sortColorStep(),e}insertColorStep(e,t="rgba(216,216,216,0)",r="rgba(216,216,216,1)"){var n=this.colorsteps;if(n.length){if(e<n[0].percent)return n[0].index=1,void this.addColorStep(new qt({index:0,color:n[0].color,percent:e}));var i=n.length-1;if(n[i].percent<e){var a=n[i].color,s=n[i].index+1;this.addColorStep(new qt({index:s,color:a,percent:e}))}else for(var o=0,u=n.length-1;o<u;o++){var l=n[o],c=n[o+1];if(l.percent<=e&&e<=c.percent){a=Mt.mix(l.color,c.color,(e-l.percent)/(c.percent-l.percent),"rgb");return void this.addColorStep(new qt({index:l.index+1,color:a,percent:e}))}}}else this.addColorStepList([new qt({color:t,percent:e,index:0}),new qt({color:r,percent:100,index:100})])}sortColorStep(){var e=this.colorsteps;e.sort((e,t)=>e.percent>t.percent?1:e.percent<t.percent?-1:e.percent==t.percent?e.index===t.index?0:e.index>t.index?1:-1:void 0),e.forEach((e,t)=>{e.index=100*t})}addColorStepList(e=[]){e.forEach(e=>{this.addColorStep(e,!1)}),this.sortColorStep()}getColorStep(e){return this.json.colorsteps.filter(t=>t.id==e)[0]}clear(...e){e.length?this.json.colorsteps.splice(+e[0],1):this.json.colorsteps=[]}get colorsteps(){return this.json.colorsteps}getColorString(){var e=this.colorsteps;return e.length?e.map((t,r)=>(t.prevColorStep=t.cut&&r>0?e[r-1]:null,t)).map(e=>`${e}`).join(","):""}static random(){return`linear-gradient(${Math.floor(1e3*Math.random())%360}deg, ${Mt.random()} 0%, ${Mt.random()} 100%)`}}class Ht extends Ut{getDefaultObject(){return super.getDefaultObject({type:"static-gradient",static:!0,colorsteps:[new qt({color:"red",percent:0,index:0})]})}toCloneObject(){return{...super.toCloneObject(),static:!0}}static create(e="transparent"){return new Ht({colorsteps:[new qt({color:e,percent:0,index:0})]})}toString(){var e=this.json.colorsteps[0].color;return`linear-gradient(to right, ${e}, ${e})`}isStatic(){return!0}}const Qt=["jpg","jpeg","png","gif","svg"];class Zt extends Gt{getDefaultObject(e={}){return super.getDefaultObject({type:"url",url:"",datauri:"",...e})}toCloneObject(){return{...super.toCloneObject(),url:this.json.url,datauri:this.json.datauri}}static parse(e){var t=e.split("(")[1].split(")")[0];return new Zt({url:t})}isUrl(){return!0}toString(e=!1){var t=this.json;if(!e)return`url(${t.url})`}static isImageFile(e){return Qt.includes(e)}}const Kt={0:"to top",45:"to top right",90:"to right",135:"to bottom right",180:"to bottom",225:"to bottom left",270:"to left",315:"to top left"},Jt={"to top":"0","to top right":"45","to right":"90","to bottom right":"135","to bottom":"180","to bottom left":"225","to left":"270","to top left":"315"};class Wt extends Ut{getDefaultObject(e){return super.getDefaultObject({type:"linear-gradient",angle:0,...e})}toCloneObject(){return{...super.toCloneObject(),angle:this.json.angle}}isLinear(){return!0}hasAngle(){return!0}toString(){if(0===this.colorsteps.length)return"";var e=this.getColorString(),t="";return M(t=this.json.angle||0)&&(t=Kt[`${t}`]||t),M(t)&&(t=`${t=t>360?t%360:t}deg`),`${this.json.type}(${t}, ${e})`}static toLinearGradient(e){return 0===e.length?"none":new Wt({angle:"to right",colorsteps:e})+""}static parse(e){var t=et(e),r=0,n=[];return t.str.split("(")[1].split(")")[0].split(",").map(e=>e.trim()).forEach((e,i)=>{e.includes("@")?(e=rt(e,t.matches),n.push(...qt.parse(e))):r=w(Jt[e])?je.parse(e):je.deg(+Jt[e])}),new Wt({angle:r.value,colorsteps:n})}}class er extends Wt{getDefaultObject(){return super.getDefaultObject({type:"repeating-linear-gradient",angle:0})}static parse(e){var t=Wt.parse(e);return new er({angle:t.angle,colorsteps:t.colorsteps})}}const tr={center:!0,top:!0,left:!0,right:!0,bottom:!0};class rr extends Ut{getDefaultObject(e={}){return super.getDefaultObject({type:"radial-gradient",radialType:"ellipse",radialPosition:[be.CENTER,be.CENTER],...e})}toCloneObject(){return{...super.toCloneObject(),radialType:this.json.radialType,radialPosition:$(this.json.radialPosition)}}isRadial(){return!0}toString(){if(0===this.colorsteps.length)return"";var e,t=this.getColorString(),r=this.json,n=r.radialType,i=r.radialPosition||["center","center"];return e=(i=tr[i]?i:i.join(" "))?`${n} at ${i}`:n,`${r.type||"radial-gradient"}(${e}, ${t})`}static parse(e){var t=et(e),r="ellipse",n=[be.CENTER,be.CENTER],i=[];return t.str.split("(")[1].split(")")[0].split(",").map(e=>e.trim()).forEach((e,a)=>{if(e.includes("@"))e=rt(e,t.matches),i.push(...qt.parse(e));else if(e.includes("at")?[r,n]=e.split("at").map(e=>e.trim()):r=e,P(n)){var s=n.split(" ");if(1===s.length){var o=je.parse(s[0]);n=o.isString()?[o.value,o.value]:[o.clone(),o.clone()]}else 2===s.length&&(n=s.map(e=>{var t=je.parse(e);return t.isString()?t.value:t.clone()}))}}),new rr({radialType:r,radialPosition:n,colorsteps:i})}}class nr extends rr{getDefaultObject(){return super.getDefaultObject({type:"repeating-radial-gradient"})}static parse(e){var t=rr.parse(e);return new nr({radialType:t.radialType,radialPosition:t.radialPosition,colorsteps:t.colorsteps})}}const ir={center:!0,top:!0,left:!0,right:!0,bottom:!0},ar={"to top":0,"to top right":45,"to right":90,"to bottom right":135,"to bottom":180,"to bottom left":225,"to left":270,"to top left":315};class sr extends Ut{getDefaultObject(e={}){return super.getDefaultObject({type:"conic-gradient",angle:0,radialPosition:[be.CENTER,be.CENTER],...e})}toCloneObject(){return{...super.toCloneObject(),angle:this.json.angle,radialPosition:$(this.json.radialPosition)}}isConic(){return!0}hasAngle(){return!0}getColorString(){if(0===this.colorsteps.length)return"";var e=this.colorsteps;return e?(e.sort((e,t)=>e.percent==t.percent?0:e.percent>t.percent?1:-1),e.map((t,r)=>(t.prevColorStep=t.cut&&r>0?e[r-1]:null,t)).map(e=>{var t=Math.floor(3.6*e.percent),r="";e.cut&&e.prevColorStep&&(r=`${Math.floor(3.6*e.prevColorStep.percent)}deg`);return`${e.color} ${r} ${t}deg`}).join(",")):""}toString(){var e=this.getColorString(),t=[],r=this.json,n=r.angle,i=r.radialPosition||be.CENTER;i=ir[i]?i:i.join(" "),S(n)&&(n=+(ar[n]||n),t.push(`from ${n}deg`)),i&&t.push(`at ${i}`);var a=t.length?t.join(" ")+",":"";return`${r.type}(${a} ${e})`}static parse(e){var t=et(e),r="0deg",n=[be.CENTER,be.CENTER],i=[];return t.str.split("(")[1].split(")")[0].split(",").map(e=>e.trim()).forEach((e,a)=>{if(e.includes("@"))e=rt(e=e.split(" ").map(e=>e.trim()).map(e=>e.includes("deg")?je.parse(e).toPercent():e).join(" "),t.matches),i.push(...qt.parse(e));else{if(e.includes("at")?[r,n]=e.split("at").map(e=>e.trim()):r=e,P(n)){var s=n.split(" ");if(1===s.length){var o=je.parse(s[0]);n=o.isString()?[o.value,o.value]:[o.clone(),o.clone()]}else 2===s.length&&(n=s.map(e=>{var t=je.parse(e);return t.isString()?t.value:t}))}P(r)&&r.includes("from")&&(r=r.split("from")[1],r=w(ar[r])?je.parse(r):je.deg(+ar[r]))}}),new sr({angle:r.value,radialPosition:n,colorsteps:i})}}class or extends sr{getDefaultObject(){return super.getDefaultObject({type:"repeating-conic-gradient",angle:0,radialPosition:[be.CENTER,be.CENTER]})}static parse(e){var t=sr.parse(e);return new or({angle:t.angle,radialPosition:t.radialPosition,colorsteps:t.colorsteps})}}const ur=["repeat","no-repeat","repeat-x","repeat-y"],lr=/((linear\-gradient|repeating\-linear\-gradient|radial\-gradient|repeating\-radial\-gradient|conic\-gradient|repeating\-conic\-gradient|url)\(([^\)]*)\))/gi;class cr extends Pe{addImageResource(e){return this.clear("image-resource"),this.addItem("image-resource",e)}addGradient(e){return this.addImageResource(e)}setImageUrl(e){e.images&&e.images.length&&this.reset({type:"image",image:cr.createImage(e.images[0])})}static createImage(e){return new Zt({url:e})}setGradient(e){this.reset({type:e.type,image:cr.createGradient(e,this.json.image)})}static createGradient(e,t){const r=e.colorsteps||t.colorsteps,n=e.angle||t.angle,i=e.radialType||t.radialType,a=e.radialPosition||t.radialPosition;let s=t.toJSON();switch(delete s.itemType,delete s.type,e.type){case"static-gradient":return new Ht({...s,colorsteps:r});case"linear-gradient":return new Wt({...s,colorsteps:r,angle:n});case"repeating-linear-gradient":return new er({...s,colorsteps:r,angle:n});case"radial-gradient":return new rr({...s,colorsteps:r,radialType:i,radialPosition:a});case"repeating-radial-gradient":return new nr({...s,colorsteps:r,radialType:i,radialPosition:a});case"conic-gradient":return new sr({...s,colorsteps:r,angle:n,radialPosition:a});case"repeating-conic-gradient":return new or({...s,colorsteps:r,angle:n,radialPosition:a})}return new Ut}getDefaultObject(){return super.getDefaultObject({itemType:"background-image",checked:!1,blendMode:"normal",size:"auto",repeat:"repeat",width:je.percent(100),height:je.percent(100),x:je.percent(0),y:je.percent(0),image:new Ht})}toCloneObject(){var e=this.json;return{...super.toCloneObject(),checked:e.checked,blendMode:e.blendMode,size:e.size,repeat:e.repeat,width:e.width+"",height:e.height+"",x:e.x+"",y:e.y+"",image:e.image.clone()}}convert(e){return e.x=je.parse(e.x),e.y=je.parse(e.y),e.width&&(e.width=je.parse(e.width)),e.height&&(e.height=je.parse(e.height)),e}get image(){return this.json.image}set image(e){this.json.image=e}checkField(e,t){return"repeat"===e?ur.includes(t):super.checkField(e,t)}toBackgroundImageCSS(e=!1){return this.json.image?{"background-image":this.json.image.toString(e)}:{}}toBackgroundPositionCSS(){var e=this.json;return{"background-position":`${e.x} ${e.y}`}}toBackgroundSizeCSS(){var e=this.json,t="auto";return"contain"==e.size||"cover"==e.size?t=e.size:e.width.isPercent()&&e.width.isPercent()&&100==+e.width&&100==+e.height||(t=`${e.width} ${e.height}`),{"background-size":t}}toBackgroundRepeatCSS(){return{"background-repeat":this.json.repeat}}toBackgroundBlendCSS(){return{"background-blend-mode":this.json.blendMode}}toCSS(e=!1){return{...this.toBackgroundImageCSS(e),...this.toBackgroundPositionCSS(),...this.toBackgroundSizeCSS(),...this.toBackgroundRepeatCSS(),...this.toBackgroundBlendCSS()}}toString(){return b(this.toCSS(),(e,t)=>`${e}: ${t}`).join(";")}toBackgroundCSS(){return{background:`${this.toCSS()["background-image"]} `}}static parse(e){return new cr(e)}static parseImage(e){var t=et(e);let r=null;return t.str.match(lr).forEach((e,n)=>{(e=rt(e,t.matches)).includes("repeating-linear-gradient")?r=er.parse(e):e.includes("linear-gradient")?r=Wt.parse(e):e.includes("repeating-radial-gradient")?r=nr.parse(e):e.includes("radial")?r=rr.parse(e):e.includes("repeating-conic-gradient")?r=or.parse(e):e.includes("conic")?r=sr.parse(e):e.includes("url")&&(r=Zt.parse(e))}),r}static parseStyle(e){var t=[];if(e["background-image"]){var r=et(e["background-image"]);r.str.match(lr).forEach((e,n)=>{let i=null;(e=rt(e,r.matches)).includes("repeating-linear-gradient")?i=er.parse(e):e.includes("linear-gradient")?i=Wt.parse(e):e.includes("repeating-radial-gradient")?i=nr.parse(e):e.includes("radial-gradient")?i=rr.parse(e):e.includes("repeating-conic-gradient")?i=or.parse(e):e.includes("conic-gradient")?i=sr.parse(e):e.includes("url")&&(i=Zt.parse(e)),t[n]=new cr({type:i.type,image:i})})}return e["background-repeat"]&&e["background-repeat"].split(",").map(e=>e.trim()).forEach((e,r)=>{t[r]&&(t[r].repeat=e)}),e["background-blend-mode"]&&e["background-blend-mode"].split(",").map(e=>e.trim()).forEach((e,r)=>{t[r]&&(t[r].blendMode=e)}),e["background-size"]&&e["background-size"].split(",").map(e=>e.trim()).forEach((e,r)=>{if(t[r])if("cover"==e||"contain"===e||"auto"===e)t[r].size=e;else{t[r].size="auto";let[n,i]=e.split(" ");t[r].width=je.parse(n),t[r].height=je.parse(i)}}),e["background-position"]&&e["background-position"].split(",").map(e=>e.trim()).forEach((e,r)=>{if(t[r]){let[n,i]=e.split(" ");t[r].x=je.parse(n),t[r].y=je.parse(i)}}),t}static toPropertyCSS(e,t=!1){var r={};return e.forEach(e=>{v(e.toCSS(t),(e,t)=>{r[e]||(r[e]=[]),r[e].push(t)})}),L(r)}static join(e){return Y(cr.toPropertyCSS(e.map(e=>cr.parse(e))))}}function pr(e,t,r,n,i){return(e,t)=>{if(0===t)return r;if(1===t)return n;var a=r+(n-r)*e;return i?a+i:a}}function hr(e,t,r,n){var i={cut:ut(0,0,r.cut,n.cut),percent:pr(0,0,r.percent,n.percent),px:pr(0,0,r.px,n.px),em:pr(0,0,r.em,n.em),unit:Lt(0,0,r.unit,n.unit),color:$t(0,0,r.color,n.color)};return(e,t)=>new qt({cut:i.cut(e,t),percent:i.percent(e,t),px:i.px(e,t),em:i.em(e,t),unit:i.unit(e,t),color:i.color(e,t)})}function fr(e,t,r=[],n=[]){for(var i=Math.max(r.length,n.length),a=[],s=0;s<i;s++){var o=r[s],u=n[s];a[s]=o&&u?hr(0,0,o,u):ut(0,0,o,u)}return(e,t)=>a.map(r=>r(e,t))}function dr(e,t,r,n){var i={angle:pr(0,0,r.angle,n.angle),colorsteps:fr(0,0,r.colorsteps,n.colorsteps)};return(e,t)=>{var r=i.colorsteps(e,t);return new Wt({angle:i.angle(e,t),colorsteps:r})}}function gr(e,t){switch(t){case"width":if("center"===e)return"50%";if("left"===e)return"0%";if("right"===e)return"100%";break;case"height":if("center"===e)return"50%";if("top"===e)return"0%";if("bottom"===e)return"100%"}return e}function mr(e,t,r,n){r.radialPosition[0]=gr(r.radialPosition[0],"width"),r.radialPosition[1]=gr(r.radialPosition[1],"height"),n.radialPosition[0]=gr(n.radialPosition[0],"width"),n.radialPosition[1]=gr(n.radialPosition[1],"height");var i={radialType:Lt(0,0,r.radialType,n.radialType),radialPositionX:we(e,0,r.radialPosition[0],n.radialPosition[0],"width","self"),radialPositionY:we(e,0,r.radialPosition[1],n.radialPosition[1],"height","self"),colorsteps:fr(0,0,r.colorsteps,n.colorsteps)};return(e,t)=>{return new rr({radialType:i.radialType(e,t),radialPosition:[i.radialPositionX(e,t),i.radialPositionY(e,t)],colorsteps:i.colorsteps(e,t)})}}function vr(e,t,r,n){var i={angle:pr(0,0,r.angle,n.angle),radialPositionX:we(e,0,r.radialPosition[0],n.radialPosition[0],"width","self"),radialPositionY:we(e,0,r.radialPosition[1],n.radialPosition[1],"height","self"),colorsteps:fr(0,0,r.colorsteps,n.colorsteps)};return(e,t)=>new sr({angle:i.angle(e,t),radialPosition:[i.radialPositionX(e,t),i.radialPositionY(e,t)],colorsteps:i.colorsteps(e,t)})}function yr(e,t,r,n){var i={image:(e,t)=>t};if("url"===r.type||"url"===n.type)i.image=ut(0,0,r,n);else if(r.type!=n.type)i.image=ut(0,0,r,n);else switch(r.type){case"linear-gradient":i.image=dr(0,0,r,n);break;case"repeating-linear-gradient":i.image=function(e,t,r,n){var i=dr(0,0,r,n);return(e,t)=>{var r=i(e,t),n=new er({angle:r.angle,colorsteps:r.colorsteps});return console.log(n),n}}(0,0,r,n);break;case"radial-gradient":i.image=mr(e,0,r,n);break;case"repeating-radial-gradient":i.image=function(e,t,r,n){var i=mr(e,0,r,n);return(e,t)=>{var r=i(e,t);return new nr({radialType:r.radialType,radialPosition:r.radialPosition,colorsteps:r.colorsteps})}}(e,0,r,n);break;case"conic-gradient":i.image=vr(e,0,r,n);break;case"repeating-conic-gradient":i.image=function(e,t,r,n){var i=vr(e,0,r,n);return(e,t)=>{var r=i(e,t);return new or({angle:r.angle,radialPosition:r.radialPosition,colorsteps:r.colorsteps})}}(e,0,r,n)}return(e,t)=>i.image(e,t)}function br(e,t,r){return(e,t)=>r}function xr(e,t,r,n){for(var i=cr.parseStyle(A(r)),a=cr.parseStyle(A(n)),s=Math.max(i.length,a.length),o=[],u=0,l=s;u<l;u++){var c=i[u]||null,p=a[u]||null;c&&!p?o.push({image:br(0,0,c.image),size:br(0,0,c.size),width:br(0,0,c.width),height:br(0,0,c.height),x:br(0,0,c.x),y:br(0,0,c.y),blendMode:br(0,0,c.blendMode),repeat:br(0,0,c.repeat)}):!c&&p?o.push({image:br(0,0,p.image),size:br(0,0,p.size),width:br(0,0,p.width),height:br(0,0,p.height),x:br(0,0,p.x),y:br(0,0,p.y),blendMode:br(0,0,p.blendMode),repeat:br(0,0,p.repeat)}):c&&p&&o.push({image:yr(e,0,c.image,p.image),size:Lt(0,0,c.size,p.size),width:we(e,0,c.width,p.width,"width","self"),height:we(e,0,c.height,p.height,"height","self"),x:we(e,0,c.x,p.x,"width","self"),y:we(e,0,c.y,p.y,"height","self"),blendMode:Lt(0,0,c.blendMode,p.blendMode),repeat:Lt(0,0,c.repeat,p.repeat)})}return(e,t)=>{return A(cr.join(o.map(r=>{return{image:r.image(e,t),size:r.size(e,t),x:r.x(e,t),y:r.y(e,t),width:r.width(e,t),height:r.height(e,t),blendMode:r.blendMode(e,t),repeat:r.repeat(e,t)}})))}}const jr=/((blur|drop\-shadow|hue\-rotate|invert|brightness|contrast|opacity|saturate|sepia)\(([^\)]*)\))/gi;class Tr extends Pe{getDefaultObject(e={}){return super.getDefaultObject({itemType:"filter",...e})}toString(){return`${this.json.type}(${this.json.value||""})`}static parse(e){var t=Lr[e.type];return t?new t(e):new Sr({value:e.type})}static parseStyle(e){var t=[];if(!e)return t;var r=et(e);return(r.str.match(jr)||[]).forEach((e,n)=>{var[i,a]=e.split("(");if(a=a.split(")")[0],"drop-shadow"===i){var s=a.split(" "),o=s.filter(e=>e.includes("@")).map(e=>r.matches[+e.replace("@","")].color),u=s.filter(e=>!e.includes("@"));t[n]=Tr.parse({type:i,offsetX:je.parse(u[0]),offsetY:je.parse(u[1]),blurRadius:je.parse(u[2]),color:o[0]||"rgba(0, 0, 0, 1)"})}else t[n]=Tr.parse({type:i,value:je.parse(a)})}),t}static join(e){return e.map(e=>Tr.parse(e)).join(" ")}}class wr extends Tr{getDefaultObject(){return super.getDefaultObject({type:"blur",value:wr.spec.defaultValue})}toCloneObject(){return{...super.toCloneObject(),value:je.parse(this.json.value)}}}wr.spec={title:"Blur",inputType:"range",min:0,max:100,step:1,unit:"px",units:["px","em"],defaultValue:je.px(0)};class Sr extends Tr{getDefaultObject(){return super.getDefaultObject({type:"svg",value:Sr.spec.defaultValue})}toCloneObject(){return{...super.toCloneObject(),value:je.parse(this.json.value)}}toString(){return`url(#${this.json.value||""})`}}Sr.spec={title:"SVG",inputType:"select",defaultValue:""};class kr extends Tr{getDefaultObject(){return super.getDefaultObject({type:"grayscale",value:kr.spec.defaultValue})}toCloneObject(){return{...super.toCloneObject(),value:je.parse(this.json.value)}}}kr.spec={title:"Grayscale",inputType:"range",min:0,max:100,step:1,unit:"%",units:["%"],defaultValue:je.percent(0)};class Cr extends Tr{getDefaultObject(){return super.getDefaultObject({type:"hue-rotate",value:Cr.spec.defaultValue})}}Cr.spec={title:"Hue",inputType:"range",min:0,max:360,step:1,unit:"deg",units:["deg"],defaultValue:je.deg(0)};class Pr extends Tr{getDefaultObject(){return super.getDefaultObject({type:"invert",value:Pr.spec.defaultValue})}}Pr.spec={title:"Invert",inputType:"range",min:0,max:100,step:1,unit:"%",units:["%"],defaultValue:je.percent(0)};class Or extends Tr{getDefaultObject(){return super.getDefaultObject({type:"brightness",value:Or.spec.defaultValue})}}Or.spec={title:"Brightness",inputType:"range",min:0,max:200,step:1,unit:"%",units:["%"],defaultValue:je.percent(100)};class Rr extends Tr{getDefaultObject(){return super.getDefaultObject({type:"contrast",value:Rr.spec.defaultValue})}}Rr.spec={title:"Contrast",inputType:"range",min:0,max:200,step:1,unit:"%",units:["%"],defaultValue:je.percent(100)};class Er extends Tr{getDefaultObject(){return super.getDefaultObject({type:"opacity",value:Er.spec.defaultValue})}}Er.spec={title:"Opacity",inputType:"range",min:0,max:100,step:1,unit:"%",units:["%"],defaultValue:je.percent(100)};class Mr extends Tr{getDefaultObject(){return super.getDefaultObject({type:"saturate",value:Mr.spec.defaultValue})}}Mr.spec={title:"Saturate",inputType:"range",min:0,max:100,step:1,unit:"%",units:["%"],defaultValue:je.percent(100)};class $r extends Tr{getDefaultObject(){return super.getDefaultObject({type:"sepia",value:$r.spec.defaultValue})}}$r.spec={title:"Sepia",inputType:"range",min:0,max:100,step:1,unit:"%",units:["%"],defaultValue:je.percent(0)};class Ir extends Tr{getDefaultObject(){return super.getDefaultObject({type:"drop-shadow",multi:!0,offsetX:Ir.spec.offsetX.defaultValue,offsetY:Ir.spec.offsetY.defaultValue,blurRadius:Ir.spec.blurRadius.defaultValue,color:Ir.spec.color.defaultValue})}toString(){var e=this.json;return`drop-shadow(${e.offsetX} ${e.offsetY} ${e.blurRadius} ${e.color})`}}Ir.spec={offsetX:{title:"Offset X",inputType:"range",min:-100,max:100,step:1,defaultValue:je.px(0),unit:"px",units:["px","em"]},offsetY:{title:"Offset Y",inputType:"range",min:-100,max:100,step:1,defaultValue:je.px(0),unit:"px",units:["px","em"]},blurRadius:{title:"Blur Radius",inputType:"range",min:0,max:100,step:1,defaultValue:je.px(0),unit:"px",units:["px","em","%"]},color:{title:"Color",inputType:"color",defaultValue:"rgba(0, 0, 0, 1)",unit:"color"}};const Lr={blur:wr,grayscale:kr,"hue-rotate":Cr,invert:Pr,brightness:Or,contrast:Rr,opacity:Er,saturate:Mr,sepia:$r,"drop-shadow":Ir,svg:Sr};function Dr(e,t,r,n){var i={type:Lt(0,0,r.type,n.type),value:ut(0,0,r.value,n.value)};switch(r.type){case"blur":i.value=we(e,0,r.value,n.value);break;case"grayscale":case"invert":case"brightness":case"contrast":case"opacity":case"saturate":case"sepia":case"hue-rotate":i.value=pr(0,0,r.value.value,n.value.value,r.value.unit);break;case"drop-shadow":i.offsetX=we(e,0,r.offsetX,n.offsetX,"width","self"),i.offsetY=we(e,0,r.offsetY,n.offsetY,"height","self"),i.blurRadius=we(e,0,r.blurRadius,n.blurRadius,"width","self"),i.spreadRadius=we(e,0,r.spreadRadius,n.spreadRadius,"width","self"),i.color=$t(0,0,r.color,n.color)}return(e,t)=>{return"drop-shadow"===i.type(e,t)?{type:i.type(e,t),offsetX:i.offsetX(e,t),offsetY:i.offsetY(e,t),blurRadius:i.blurRadius(e,t),spreadRadius:i.spreadRadius(e,t),color:i.color(e,t)}:{type:i.type(e,t),value:i.value(e,t)}}}function Nr(e,t,r,n){for(var i=Tr.parseStyle(r),a=Tr.parseStyle(n),s=Math.max(i.length,a.length),o=[],u=0,l=s;u<l;u++){var c=i[u],p=a[u];c&&!p?o.push(br(0,0,c)):!c&&p?o.push(br(0,0,p)):c.type!=p.type||"svg"===c.type||"svg"===p.type?o.push(ut(0,0,c,p)):o.push(Dr(e,0,c,p))}return(e,t)=>Tr.join(o.map(r=>r(e,t)))}class Fr{static parse(e){var t=e.split(" ").filter(e=>e.trim()).map(e=>je.parse(e)),r=je.percent(0),n=je.percent(0),i=je.percent(0),a=je.percent(0);return 1===t.length?(r=t[0].clone(),n=t[0].clone(),i=t[0].clone(),a=t[0].clone()):2===t.length?(r=t[0].clone(),n=t[1].clone(),i=t[0].clone(),a=t[1].clone()):3===t.length?(r=t[0].clone(),n=t[1].clone(),i=t[2].clone(),a=t[1].clone()):4===t.length&&(r=t[0].clone(),n=t[1].clone(),i=t[2].clone(),a=t[3].clone()),[t.length,r,n,i,a]}}const Xr=/(content\-box|padding\-box|border\-box|margin\-box|view\-box|stroke\-box|fill\-box|none|(inset|circle|ellipse|polygon|path|url)(\(([^\)]*)\))?)/gi;class Yr extends Pe{getDefaultObject(e={}){return super.getDefaultObject({itemType:"clip-path",type:"none",value:"",...e})}toCloneObject(){return{...super.toCloneObject(),value:this.json.value}}toString(){var e=this.json.type,t=this.json.value,r=this.json.box,n="";switch(e){case"circle":case"inset":case"ellipse":case"polygon":case"path":n=`${e}(${t})`;break;case"svg":n=`url(#${t})`;break;default:n="none"}return r?`${r} ${n}`:n}toCSS(){return{"clip-path":this.toString()}}static toCSS(e){return new Yr(e).toCSS()}static toString(e){return Yr.toCSS(e)["clip-path"]}static parse(e){return new Yr(e)}static parseStyle(e){var t={};return e?((e.match(Xr)||[]).forEach((e,r)=>{if(e.includes("-box"))t.box=e;else{var[n,i]=e.split("(");i=i||"",i="none"===n?"":i.split(")")[0],t.type=n,t.value=i}}),t):{}}static parseStyleForCircle(e){var t=new je("","closest-side"),r="";(e=e||"50%").includes("at")?[t,r]=e.split("at").map(e=>e.trim()):r=e.trim();var[n,i]=r.split(" ");return w(i)&&(i=n),{radius:t,x:n=je.parse(n),y:i=je.parse(i)}}static parseStyleForEllipse(e="50% 50%"){var t="50% 50%",r="";(e=e||"50%").includes("at")?[t,r]=e.split("at").map(e=>e.trim()):r=e.trim();var[n,i]=r.split(" ");w(i)&&(i=n),n=je.parse(n),i=je.parse(i);var[a,s]=t.split(" ");return w(s)&&(s=a),{radiusX:a=je.parse(a),radiusY:s=je.parse(s),x:n,y:i}}static parseStyleForInset(e=""){var[t,r]=e.split("round"),[n,i,a,s,o]=Fr.parse(t);if(r)var[u,l,c,p,h]=Fr.parse(r);return{isAll:1===n,top:i,right:a,bottom:s,left:o,round:r,isAllRadius:1===u,topRadius:l,rightRadius:c,bottomRadius:p,leftRadius:h}}static parseStyleForPolygon(e=""){return e.split(",").filter(e=>e.trim()).map(e=>{var[t,r]=e.trim().split(" ");return{x:je.parse(t),y:je.parse(r)}})}}function Ar(e,t,r,n){var i=Yr.parseStyle(r),a=Yr.parseStyle(n),s={type:ut(0,0,i.type,i.type),value:ut(0,0,r,n)};if(i.type==a.type&&"none"!=i)switch(i.type){case"circle":i.value=Yr.parseStyleForCircle(i.value),a.value=Yr.parseStyleForCircle(a.value),s.value=function(e,t,r,n){var i={};return"closest-side"===r.radius||"farthest-side"===r.radius||"closest-side"===n.radius||"farthest-side"===n.radius?i.radius=ut(0,0,r.radius,n.radius):r.radius.unit===n.radius.unit?i.radius=makeInterpolateNumber(e,t,r.radius.value,n.radius.value,r.radius.unit):i.radius=we(e,0,r.radius,n.radius,"width","self"),i.x=we(e,0,r.x,n.x,"width","self"),i.y=we(e,0,r.y,n.y,"height","self"),(e,t)=>{var r=i.radius(e,t),n=`${i.x(e,t)} ${i.y(e,t)}`,a=r+"";return a.includes("closest-side")?a="closest-side":a.includes("farthest-side")&&(a="farthest-side"),r?`${a} at ${n}`:`${n}`}}(e,t,i.value,a.value);break;case"ellipse":i.value=Yr.parseStyleForEllipse(i.value),a.value=Yr.parseStyleForEllipse(a.value),s.value=function(e,t,r,n){var i={radiusX:we(e,0,r.radiusX,n.radiusX,"width","self"),radiusY:we(e,0,r.radiusY,n.radiusY,"height","self"),x:we(e,0,r.x,n.x,"width","self"),y:we(e,0,r.y,n.y,"height","self")};return(e,t)=>{return`${i.radiusX(e,t)} ${i.radiusY(e,t)} at ${i.x(e,t)} ${i.y(e,t)}`}}(e,0,i.value,a.value);break;case"inset":i.value=Yr.parseStyleForInset(i.value),a.value=Yr.parseStyleForInset(a.value),s.value=function(e,t,r,n){var i={top:pr(0,0,r.top.value,n.top.value,r.top.unit),left:pr(0,0,r.left.value,n.left.value,r.left.unit),right:pr(0,0,r.right.value,n.right.value,r.right.unit),bottom:pr(0,0,r.bottom.value,n.bottom.value,r.bottom.unit),round:ut(0,0,r.round,n.round),topRadius:pr(0,0,r.topRadius.value,n.topRadius.value,r.topRadius.unit),leftRadius:pr(0,0,r.leftRadius.value,n.leftRadius.value,r.leftRadius.unit),rightRadius:pr(0,0,r.rightRadius.value,n.rightRadius.value,r.rightRadius.unit),bottomRadius:pr(0,0,r.bottomRadius.value,n.bottomRadius.value,r.bottomRadius.unit)};return(e,t)=>{var r=i.top(e,t),n=i.right(e,t),a=i.bottom(e,t),s=i.left(e,t),o=i.round(e,t),u=i.topRadius(e,t),l=i.leftRadius(e,t),c=i.bottomRadius(e,t),p=i.rightRadius(e,t),h=[r,n,a,s].join(" "),f=[u,p,c,l].join(" ");return`${h} ${o&&f.trim()?`round ${f}`:""}`}}(0,0,i.value,a.value);break;case"polygon":i.value=Yr.parseStyleForPolygon(i.value),a.value=Yr.parseStyleForPolygon(a.value),s.value=function(e,t,r,n){for(var i=Math.max(r.length,n.length),a=[],s=0;s<i;s++){var o=r[s],u=n[s];o&&!u?a.push({x:br(0,0,o.x),y:br(0,0,o.y)}):!o&&u?a.push({x:br(0,0,u.x),y:br(0,0,u.y)}):a.push({x:we(e,0,o.x,u.x,"width","self"),y:we(e,0,o.y,u.y,"height","self")})}return(e,t)=>a.map(r=>`${r.x(e,t)} ${r.y(e,t)}`).join(",")}(e,0,i.value,a.value);break;case"path":i.value=Yr.parseStyleForPath(i.value),a.value=Yr.parseStyleForPath(a.value),s.value=makeInterpolateClipPathPath(e,t,i.value,a.value)}return(e,t)=>{var r=s.type(e,t),n=s.value(e,t);return"none"===r?r:`${r}(${n})`}}const _r=/((matrix|translate(X|Y|Z|3d)?|scale(X|Y|Z|3d)?|rotate(X|Y|Z|3d)?|skew(X|Y)|matrix(3d)?|perspective)\(([^\)]*)\))/gi;class Br extends Pe{getDefaultObject(e={}){return super.getDefaultObject({itemType:"transform",type:"",value:[],...e})}toCloneObject(){return{...super.toCloneObject(),value:JSON.parse(JSON.stringify(this.json.value))}}toString(){return`${this.json.type}(${this.json.value.join(", ")||""})`}convert(e){return(e=super.convert(e)).type.includes("matrix")||e.type.includes("scale")?e.value=e.value.map(e=>je.number(e)):e.value=e.value.map(e=>je.parse(e)),e}static join(e){return[...e.filter(e=>"perspective"===e.type),...e.filter(e=>"perspective"!==e.type)].map(e=>new Br(e).toString()).join(" ")}hasNumberValue(){var e=this.json.type;return e.includes("matrix")||e.includes("scale")}static parse(e){return new Br(e)}static parseStyle(e){var t=[];return e?((e.match(_r)||[]).forEach((e,r)=>{var[n,i]=e.split("("),a=(i=i.split(")")[0]).split(",");a=i.includes("matrix")||i.includes("scale")?a.map(e=>je.number(e.trim())):a.map(e=>je.parse(e.trim())),t[r]=Br.parse({type:n,value:a})}),t):t}}function Vr(e,t,r,n){for(var i={type:ut(0,0,r.type,n.type)},a=[],s=Math.max(r.value.length,n.value.length),o=0;o<s;o++){var u=r.value[o],l=n.value[o];u&&l?a.push(we(e,0,u,l,r.type)):a.push(we(e,0,r.value[o]||r.value[o-1]||r.value[o-2],n.value[o]||n.value[o-1]||r.value[o-2],r.type))}return i.value=a,(e,t)=>({type:i.type(e,t),value:i.value.map(r=>r(e,t))})}function Gr(e,t,r,n){for(var i={type:ut(0,0,r.type,n.type)},a=[],s=Math.max(r.value.length,n.value.length),o=0;o<s;o++){var u=r.value[o],l=n.value[o];if(u&&l)a.push(pr(0,0,u.value,l.value));else{var c=r.value[o].value||r.value[o-1].value||r.value[o-2].value,p=n.value[o].value||n.value[o-1].value||r.value[o-2].value;a.push(pr(0,0,c,p))}}return i.value=a,(e,t)=>{var r=i.value.map(r=>r(e,t)),n=i.type(e,t);return(n.includes("matrix")||n.includes("scale"))&&(r=r.map(e=>je.number(e))),{type:n,value:r}}}function qr(e,t,r,n){for(var i={type:ut(0,0,r.type,n.type)},a=[],s=Math.max(r.value.length,n.value.length),o=0;o<s;o++){var u=r.value[o],l=n.value[o];u&&l?a.push(_t(0,0,u,l)):a.push(_t(0,0,r.value[o]||r.value[o-1]||r.value[o-2],n.value[o]||n.value[o-1]||r.value[o-2]))}return i.value=a,(e,t)=>{return{type:i.type(e,t),value:i.value.map(r=>r(e,t))}}}function zr(e,t,r,n){for(var i=Br.parseStyle(r.trim()),a=Br.parseStyle(n.trim()),s=Math.max(i.length,a.length),o=[],u=0;u<s;u++){var l=i[u],c=a[u];if(l&&!c)o.push(br(0,0,l));else if(!l&&c)o.push(br(0,0,c));else if(l.type!=c.type)o.push(ut(0,0,l,c));else switch(l.type){case"skewX":case"skewY":case"translate":case"translateX":case"translateY":case"translateZ":case"translate3d":case"perspective":o.push(Vr(e,0,l,c));break;case"rotate":case"rotateX":case"rotateY":case"rotateZ":case"rotate3d":o.push(qr(0,0,l,c));break;case"scale":case"scaleX":case"scaleY":case"scaleZ":case"scale3d":case"matrix":case"matrix3d":o.push(Gr(0,0,l,c))}}return(e,t)=>{return Br.join(o.map(r=>r(e,t)))}}function Ur(e,t,r,n){for(var i=r.split(" ").map(e=>je.parse(e)),a=n.split(" ").map(e=>je.parse(e)),s=Math.max(i.length,a.length),o=[],u=0;u<s;u++){var l=i[u],c=a[u];o.push(we(e,0,l,c,"transform-origin"))}return(e,t)=>{return o.map(r=>r(e,t)).join(" ")}}function Hr(e,t,r,n){for(var i=r.split(" ").map(e=>je.parse(e)),a=n.split(" ").map(e=>je.parse(e)),s=Math.max(i.length,a.length),o=[],u=0;u<s;u++){var l=i[u],c=a[u];o.push(we(e,0,l,c,"perspective-origin"))}return(e,t)=>{return o.map(r=>r(e,t)).join(" ")}}function Qr(e,t,r,n){for(var i=r.split(" ").map(e=>+e),a=n.split(" ").map(e=>+e),s=Math.max(i.length,a.length),o=[],u=0;u<s;u++){var l=i[u],c=a[u];o.push(pr(0,0,l,c))}return(e,t)=>{return o.map(r=>r(e,t)).join(" ")}}class Zr{static isEqual(e,t){return e.x===t.x&&e.y===t.y}static isFirst(e){return e&&"M"==e.command}static getReversePoint(e,t){var r=e.x-t.x,n=e.y-t.y;return{x:e.x+r,y:e.y+n}}static getIndexPoint(e,t){return e[t]}static getPoint(e,t){return e.filter(e=>Zr.isEqual(e.startPoint,t))[0]}static getIndex(e,t){for(var r=-1,n=0,i=e.length;n<i;n++){var a=e[n];if(Zr.isEqual(a.startPoint,t)){r=n;break}}return r}static getPointIndex(e,t){for(var r=-1,n=0,i=e.length;n<i;n++){var a=e[n];if(Zr.isEqual(a,t)){r=n;break}}return r}static getLastPoint(e,t){if(!e.length)return null;for(var r=-1,n=t+1,i=e.length;n<i;n++)if("M"===e[n].command){r=n-1;break}-1==r&&(r=e.length-1),e[r]&&"Z"===e[r].command&&(r-=1);var a=e[r];return a&&(a.index=r),a}static getFirstPoint(e,t){for(var r=-1,n=t-1;n>0;n--)if("M"===e[n].command){r=n;break}-1===r&&(r=0);var i=e[r];return i&&(i.index=r),i}static getPrevPoint(e,t){var r=t-1;if(r<0)return Zr.getLastPoint(e,t);var n=e[r];return n&&(n.index=r),n}static getNextPoint(e,t){return e[t].connected?Zr.getFirstPoint(e,t):e[t+1]}}const Kr=/([mMlLvVhHcCsSqQtTaAzZ]([^mMlLvVhHcCsSqQtTaAzZ]*))/g;var Jr=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi;const Wr={multiply:function(e){return function(t,r){var n=+t[r],i=+t[r+1];return[e[0][0]*n+e[0][1]*n+e[0][2],e[1][0]*i+e[1][1]*i+e[1][2],1]}},translate:function(e,t){return this.multiply([[1,0,e],[0,1,t],[0,0,1]])},rotate:function(e){return this.multiply([[Math.cos(e),Math.sin(e),0][(Math.sin(e),Math.cos(e),0)],[0,0,1]])},scale:function(e,t){return this.multiply([[e,0,0],[0,t,0],[0,0,1]])},skewX:function(e){return this.multiply([[1,e,0],[0,1,0],[0,0,1]])},skewY:function(e){return this.multiply([[1,0,0],[e,1,0],[0,0,1]])},reflectionOrigin:function(){return this.multiply([[-1,0,0],[0,-1,0],[0,0,1]])},reflectionX:function(){return this.multiply([[1,0,0],[0,-1,0],[0,0,1]])},reflectionY:function(){return this.multiply([[-1,0,0],[0,1,0],[0,0,1]])}};class en{constructor(e=""){this.reset(e)}reset(e=""){this.segments=[],this.pathString=e,this.parse()}resetSegments(e){this.segments=e||[],this.pathString=this.joinPath()}trim(e=""){return(e.match(Jr)||[]).filter(e=>""!=e)}parse(){var e=this.pathString.match(Kr)||[];this.segments=e.map(e=>{var t=e[0];return{command:t,values:this.trim(e.replace(t,"")).map(e=>+e)}}),this.segments=this.segments.map((e,t)=>{switch(e.command){case"c":case"m":case"l":case"q":case"s":case"t":case"v":case"h":for(var r=this.segments[t-1],n=r.values[r.values.length-2],i=r.values[r.values.length-1],a=0,s=e.values.length;a<s;a+=2)e.values[a]+=n,e.values[a+1]+=i;return{command:e.command.toUpperCase(),values:[...e.values]};default:return e}})}convertGenerator(){for(var e=[],t=0,r=this.segments.length;t<r;t++){var n=this.segments[t],i=this.segments[t+1];const{command:r,values:b}=n;if("M"===r){var[a,s]=b;e.push({command:r,originalCommand:r,startPoint:{x:a,y:s},endPoint:{x:a,y:s},reversePoint:{x:a,y:s},curve:!1})}else if("L"===r){if((d=Zr.getPrevPoint(e,e.length)).curve){var[a,s]=b;e.push({command:r,originalCommand:r,startPoint:{x:a,y:s},endPoint:{x:a,y:s},reversePoint:$(d.endPoint),curve:!0})}else{var[a,s]=b;e.push({command:r,originalCommand:r,startPoint:{x:a,y:s},endPoint:{x:a,y:s},reversePoint:{x:a,y:s},curve:!1})}}else if("Q"===r){var[o,u,a,s]=b;if((d=Zr.getPrevPoint(e,e.length)).curve){var l={x:a,y:s},c={x:a,y:s},p={x:a,y:s};e.push({command:"L",originalCommand:r,startPoint:l,endPoint:c,reversePoint:p,curve:!1}),d.endPoint={x:o,y:u}}else if(i&&"L"===i.command){d.curve=!0,d.endPoint={x:o,y:u};l={x:a,y:s},p={x:a,y:s},c={x:a,y:s};e.push({command:"L",originalCommand:r,curve:!1,startPoint:l,endPoint:c,reversePoint:p})}else{l={x:a,y:s},p={x:o,y:u},c={x:a,y:s};e.push({command:r,originalCommand:r,curve:!0,startPoint:l,endPoint:c,reversePoint:p})}}else if("T"===r){var[a,s]=b;if((v=segments[t-1])&&"Q"===v.command){var[o,u,h,f]=v.values;(d=Zr.getPrevPoint(e,e.length)).endPoint=Zr.getReversePoint({x:h,y:f},{x:o,y:u});l={x:a,y:s},c={x:a,y:s},p={x:a,y:s};e.push({command:"L",originalCommand:r,startPoint:l,endPoint:c,reversePoint:p,curve:!1})}}else if("C"===r){var d=Zr.getPrevPoint(e,e.length),[o,u,g,m,a,s]=b;l={x:a,y:s},p={x:g,y:m},c={x:a,y:s};e.push({command:r,originalCommand:r,curve:!0,startPoint:l,endPoint:c,reversePoint:p}),d&&(d.curve=!0,d.endPoint={x:o,y:u})}else if("S"===r){var v,[a,s]=b;if((v=segments[t-1])&&"C"===v.command){var[g,m,h,f]=v.values;(d=Zr.getPrevPoint(e,e.length)).endPoint=Zr.getReversePoint(d.startPoint,d.reversePoint);l={x:a,y:s},c={x:a,y:s},p={x:g,y:m};e.push({command:"Q",originalCommand:r,startPoint:l,endPoint:c,reversePoint:p,curve:!1})}}else if("Z"===r){d=Zr.getPrevPoint(e,e.length);var y=Zr.getFirstPoint(e,e.length);Zr.isEqual(d.startPoint,y.startPoint)&&(d.connected=!0,"C"===d.command&&(y.curve=!0,Zr.isEqual(y.endPoint,y.startPoint)&&(y.endPoint=Zr.getReversePoint(d.startPoint,d.reversePoint)))),d.close=!0}}return e=e.filter(e=>!!e)}length(){return this.segments.length}setSegments(e,t){this.segments[e]=t}getSegments(e){return S(e)?this.segments[e]:this.segments}joinPath(e){return(e||this.segments).map(e=>`${e.command} ${e.values.length?e.values.join(" "):""}`).join("")}each(e,t=!1){var r=this.segments.map(t=>e.call(this,t));if(t)return r;this.segments=r}_loop(e,t=!1){return this.each((function(t){var r=t.values;switch(t.command){case"M":case"L":var n=e(r,0);t.values=[n[0],n[1]];break;case"V":n=e([+r[0],0]);t.values=[n[0]];break;case"H":n=e([0,+r[0]]);t.values=[n[1]];break;case"C":case"S":case"T":case"Q":for(var i=0,a=r.length;i<a;i+=2){n=e(r,i);t.values[i]=n[0],t.values[i+1]=n[1]}}return t}),t)}clone(){return new en(this.joinPath())}translate(e,t){return this._loop(Wr.translate(e,t)),this}translateTo(e,t){return this.joinPath(this._loop(Wr.translate(e,t),!0))}scale(e,t){return this._loop(Wr.scale(e,t)),this}scaleTo(e,t){return this.joinPath(this._loop(Wr.scale(e,t),!0))}rotate(e){return this._loop(Wr.rotate(e)),this}rotateTo(e){return this.joinPath(this._loop(Wr.rotate(e),!0))}reflectionOrigin(e){return this._loop(Wr.reflectionOrigin(e)),this}reflectionOriginTo(e){return this.joinPath(this._loop(Wr.reflectionOrigin(e),!0))}reflectionX(e){return this._loop(Wr.reflectionX(e)),this}reflectionXTo(e){return this.joinPath(this._loop(Wr.reflectionX(e),!0))}reflectionY(e){return this._loop(Wr.reflectionY(e)),this}reflectionYTo(e){return this.joinPath(this._loop(Wr.reflectionY(e),!0))}skewX(e){return this._loop(Wr.skewX(e)),this}skewXTo(e){return this.joinPath(this._loop(Wr.skewX(e),!0))}skewY(e){return this._loop(Wr.skewY(e)),this}skewYTo(e){return this.joinPath(this._loop(Wr.skewY(e),!0))}toString(){return this.joinPath()}}class tn{constructor(){this.pathArray=[]}reset(){this.pathArray=[]}getPointString(e){return e.map(e=>`${e.x} ${e.y}`).join(" ")}makeString(e,t=[]){return this.pathArray.push(`${e} ${this.getPointString(t)}`),this}M(...e){return this.makeString("M",e)}L(...e){return this.makeString("L",e)}Q(...e){return this.makeString("Q",e)}C(...e){return this.makeString("C",e)}Z(){return this.makeString("Z")}get d(){return this.pathArray.join(" ").trim()}toString(e="object"){return`<path d="${this.d}" class='${e}'/>`}}const rn=/[\b\t \,]/g;class nn extends en{constructor(e=""){super(e)}reset(e=""){this.segments=[],this.points=e,this.parse()}resetSegments(e=[]){this.segments=e,this.points=this.joinPoints()}parse(){var e=this.points;k(e)&&(e=e.join(" "));for(var t=e.trim().split(rn),r=[],n=0,i=t.length;n<i;n+=2)r.push({x:+t[n],y:+t[n+1]});this.segments=r}convertGenerator(){return this.segments}length(){return this.segments.length}toPathString(){for(var e=new tn,t=0,r=this.segments.length;t<r;t++){var n=this.segments[t];0===t?e.M(n):t===r-1?e.L(n).L(this.segments[0]).Z():e.L(n)}return e.d}joinPath(e){return this.joinPoints(e)}joinPoints(e){return(e||this.segments).map(e=>`${e.x},${e.y}`).join(" ")}each(e,t=!1){var r=this.segments.map(t=>e.call(this,t));if(t)return r;this.segments=r}_loop(e,t=!1){return this.each((function(t){var[r,n]=e([t.x,t.y],0);return t.x=r,t.y=n,t}),t)}clone(){return new nn(this.joinPoints())}toString(){return this.joinPoints()}}function an(e,t,r,n){for(var i=Math.max(r.length,n.length),a=[],s=r[r.length-1],o=n[n.length-1],u=0;u<i;u++){var l=r[u],c=n[u];l&&!c?a.push(pr(0,0,l,o)):!l&&c?a.push(pr(0,0,s,c)):a.push(pr(0,0,l,c))}return(e,t)=>a.map(r=>r(e,t))}function sn(e,t,r,n){for(var i=new en,a=new en(r),s=new en(n),o=Math.max(a.segments.length,s.segments.length),u=[],l=0;l<o;l++){var c=a.segments[l],p=s.segments[l];c.command===p.command?c.values.length===p.values.length?u.push({command:br(0,0,c.command),values:an(0,0,c.values,p.values)}):u.push({command:br(0,0,c.command),values:br(0,0,c.values)}):u.push({command:ut(0,0,c.command,p.command),values:ut(0,0,c.values,p.values)})}return(e,t)=>{var r=u.map(r=>({command:r.command(e,t),values:r.values(e,t)}));return i.joinPath(r)}}function on(e,t,r,n){for(var i=new nn,a=new nn(r),s=new nn(n),o=Math.max(a.segments.length,s.segments.length),u=[],l=a.segments[a.segments.length-1].x,c=a.segments[a.segments.length-1].y,p=s.segments[s.segments.length-1].x,h=s.segments[s.segments.length-1].y,f=0;f<o;f++){var d=a.segments[f],g=s.segments[f];d&&!g?u.push({x:pr(0,0,d.x,p),y:pr(0,0,d.y,h)}):!d&&g?u.push({x:pr(0,0,l,g.x),y:pr(0,0,c,g.y)}):u.push({x:pr(0,0,d.x,g.x),y:pr(0,0,d.y,g.y)})}return(e,t)=>{return i.joinPoints(u.map(r=>({x:r.x(e,t),y:r.y(e,t)})))}}function un(e,t,r,n){var i={x:pr(0,0,e,r),y:pr(0,0,t,n)};return(e,t)=>{return{x:i.x(e,t),y:i.y(e,t)}}}function ln(e,t,r,n,i,a){var s=[{x:e,y:t},{x:r,y:n},{x:i,y:a}];return(e,t)=>ve(s,t)}function cn(e,t,r,n,i,a,s,o){var u=[{x:e,y:t},{x:r,y:n},{x:i,y:a},{x:s,y:o}];return(e,t)=>me(u,t)}function pn(e,t,r,n){var[i,a,s,o]=r.split(",").map(e=>e.trim()),u={id:i,distance:je.parse(a||"0%"),rotateStatus:s||"auto",rotate:je.parse(o||"0deg")},l=(e,t)=>({x:x,y:y}),c=0,p=0;if(artboard){var h={d:"path info"};c=h.screenX.value,p=h.screenY.value,l=(e,t,r)=>{var n=new en(h.d),{totalLength:i,interpolateList:a}=function(e){var t=[],r=[];e.forEach((e,n)=>{switch(e.command){case"M":var[i,a]=e.values;r=[i,a];break;case"m":var[s,o]=r,[i,a]=e.values;r=[i+=s,a+=o];break;case"L":var[s,o]=r,[i,a]=e.values;t.push({command:e.command,values:[s,o,i,a],length:W(s,o,i,a),interpolate:un(s,o,i,a)}),r=[i,a];break;case"l":var[s,o]=r,[i,a]=e.values;i+=s,a+=o,t.push({command:e.command,values:[s,o,i,a],length:W(s,o,i,a),interpolate:un(s,o,i,a)}),r=[i,a];break;case"C":var[s,o]=r,[u,l,c,p,i,a]=e.values;t.push({command:e.command,values:[s,o,u,l,c,p,i,a],length:he(s,o,u,l,c,p,i,a),interpolate:cn(s,o,u,l,c,p,i,a)}),r=[i,a];break;case"c":var[s,o]=r,[u,l,c,p,i,a]=e.values;u+=s,c+=s,i+=s,l+=o,p+=o,a+=o,t.push({command:e.command,values:[s,o,u,l,c,p,i,a],length:he(s,o,u,l,c,p,i,a),interpolate:cn(s,o,u,l,c,p,i,a)}),r=[i,a];break;case"Q":var[s,o]=r,[u,l,i,a]=e.values;t.push({command:e.command,values:[s,o,u,l,i,a],length:fe(s,o,u,l,i,a),interpolate:ln(s,o,u,l,i,a)}),r=[i,a];break;case"q":var[s,o]=r,[u,l,i,a]=e.values;u+=s,i+=s,l+=o,a+=o,t.push({command:e.command,values:[s,o,u,l,i,a],length:fe(s,o,u,l,i,a),interpolate:ln(s,o,u,l,i,a)}),r=[i,a];break;case"S":var[s,o]=r,[c,p,i,a]=e.values,h=t[t.length-1];if(["C","c","S","s"].includes(h.command)){var[f,d,g,m,v,y,b,x]=h.values,{x:u,y:l}=Zr.getReversePoint({x:b,y:x},{x:v,preC1y:y});t.push({command:e.command,values:[s,o,u,l,c,p,i,a],length:getCubicDist(s,o,u,l,c,p,i,a),interpolate:cn(s,o,u,l,c,p,i,a)}),r=[i,a];break}case"s":var[s,o]=r,[c,p,i,a]=e.values;c+=s,i+=s,p+=o,a+=o;h=t[t.length-1];if(["C","c","S","s"].includes(h.command)){var[f,d,g,m,v,y,b,x]=h.values,{x:u,y:l}=Zr.getReversePoint({x:b,y:x},{x:v,preC1y:y});t.push({command:e.command,values:[s,o,u,l,c,p,i,a],length:getCubicDist(s,o,u,l,c,p,i,a),interpolate:cn(s,o,u,l,c,p,i,a)}),r=[i,a];break}case"T":var[s,o]=r,[i,a]=e.values;h=t[t.length-1];if(["Q","q","T","t"].includes(h.command)){var[f,d,v,y,b,x]=h.values,{x:u,y:l}=Zr.getReversePoint({x:b,y:x},{x:v,preC1y:y});t.push({command:e.command,values:[s,o,u,l,i,a],length:fe(s,o,u,l,i,a),interpolate:ln(s,o,u,l,i,a)}),r=[i,a]}break;case"t":var[s,o]=r,[i,a]=e.values;i+=s,a+=o;h=t[t.length-1];if(["Q","q","T","t"].includes(h.command)){var[f,d,v,y,b,x]=h.values,{x:u,y:l}=Zr.getReversePoint({x:b,y:x},{x:v,preC1y:y});t.push({command:e.command,values:[s,o,u,l,i,a],length:fe(s,o,u,l,i,a),interpolate:ln(s,o,u,l,i,a)}),r=[i,a]}}});var n=0;t.forEach(e=>{n+=e.length});var i=0;return t.forEach(e=>{e.startT=i/n,e.endT=(i+e.length)/n,e.totalLength=n,i+=e.length}),{totalLength:n,interpolateList:t}}(n.segments),s=u.distance.toPx(i);(t+=s/i)>1&&(t-=1);var o=a[0];0===t?o=a[0]:1===t&&(o=a[a.length-1]);var l=a.find(e=>e.startT<=t&&t<e.endT);l&&(o=l);var c=(t-o.startT)/(o.endT-o.startT),p=r(c);return{...o.interpolate(p,c,r),totalLength:o.totalLength}}}return(t,r,n)=>{var i=(e["transform-origin"]||"50% 50%").split(" ").map(e=>je.parse(e)),a=i[0].toPx(e.width.value),o=i[1].toPx(e.height.value),h=l(t,r,n),f={x:h.x+c-a.value,y:h.y+p-o.value};if(e.setScreenX(f.x),e.setScreenY(f.y),"element"===u.rotateStatus);else{var d=h,g=l(t+1/h.totalLength,r+1/h.totalLength,n),m=ee(g.x-d.x,g.y-d.y),v=je.deg((e=>{switch(s){case"angle":return u.rotate.value;case"auto angle":return e+u.rotate.value;case"reverse":return e+180;case"auto":return e;default:return}})(m));e.rotate=v}return f}}const hn=()=>(e,t)=>{};function fn(e,t,r,n){switch(t){case"width":case"x":return we(e,0,r,n,"width");case"height":case"y":return we(e,0,r,n,"height");case"perspective":case"font-size":case"font-stretch":case"font-weight":case"text-stroke-width":return we(e,0,r,n,t);case"fill-opacity":case"opacity":case"stroke-dashoffset":return pr(0,0,+r,+n);case"background-color":case"color":case"text-fill-color":case"text-stroke-color":case"fill":case"stroke":return $t(0,0,r,n);case"mix-blend-mode":case"fill-rule":case"stroke-linecap":case"stroke-linejoin":return Lt(0,0,r,n);case"rotate":return _t(0,0,r,n)}var i=function(e){switch(e){case"border-radius":return Se;case"box-shadow":return It;case"text-shadow":return Vt;case"background-image":return xr;case"filter":case"backdrop-filter":return Nr;case"clip-path":return Ar;case"transform":return zr;case"transform-origin":return Ur;case"perspective-origin":return Hr;case"stroke-dasharray":return Qr;case"d":return sn;case"points":return on;case"offset-path":return pn}}(t);return i?i(e,t,r,n):hn}function dn(e,t,r,n){return fn(e,t,r,n)}function gn(e="linear"){var[t,r]=e.split("(").map(e=>e.trim());r=(r||"").split(")")[0].trim();var n=Yt[t];return n?n(...e.split("(")[1].split(")")[0].split(",").map(e=>e.trim())):function(e){var t=de(e);return e=>t(e).y}(e)}const mn=(e,t={},r={})=>{const n={...t,...r};Object.keys(n).forEach(n=>{((e,t,r,n)=>{r?n&&r!==n||((e,t,r)=>{"boolean"==typeof r?((e,t,r)=>{r?(e.setAttribute(t,t),e[t]=r):(e.removeAttribute(t),e[t]=r)})(e,t,r):e.setAttribute(t,r)})(e,t,r):((e,t,r)=>{"boolean"==typeof r&&((e,t)=>{e.removeAttribute(t),e[t]=!1})(e,t)})(e,t,n)})(e,n,t[n],r[n])})};function vn(e){var t={};for(var r of e)t[r.name]=r.value;return t}function yn(e,t,r,n){if(t)if(r){if(u=t,(o=r).nodeType===Node.TEXT_NODE&&o!==u||o.nodeName!==u.nodeName)e.replaceChild(r.cloneNode(!0),t);else if(r.nodeType!==Node.TEXT_NODE){mn(t,vn(r.attributes),vn(t.attributes));var i=bn(t),a=bn(r),s=Math.max(i.length,a.length);for(n=0;n<s;n++)yn(t,i[n],a[n],n)}}else e.removeChild(t);else e.appendChild(r.cloneNode(!0));var o,u}const bn=e=>{var t=e.firstElementChild;if(!t)return[];var r=[];do{r.push(t),t=t.nextElementSibling}while(t);return r};let xn=0,jn=[];class Tn{constructor(e,t,r){if(O(e))this.el=e;else{var n=document.createElement(e);for(var i in this.uniqId=xn++,t&&(n.className=t),r=r||{})n.setAttribute(i,r[i]);this.el=n}}static create(e,t,r){return new Tn(e,t,r)}static getScrollTop(){return Math.max(window.pageYOffset,document.documentElement.scrollTop,document.body.scrollTop)}static getScrollLeft(){return Math.max(window.pageXOffset,document.documentElement.scrollLeft,document.body.scrollLeft)}static parse(e){return DOMParser().parseFromString(e,"text/htmll")}static body(){return Tn.create(document.body)}data(e,t){var r=e.split("-").map((e,t)=>0===t?e:e.substr(0,1).toUpperCase()+e.substr(1)).join("");if(1===arguments.length)return this.el.dataset(r);this.el.dataset(r,t)}attr(e,t){return 1==arguments.length?this.el.getAttribute(e):(this.el.setAttribute(e,t),this)}attrKeyValue(e){return{[this.el.getAttribute(e)]:this.val()}}attrs(...e){return e.map(e=>this.el.getAttribute(e))}styles(...e){return e.map(e=>this.el.style[e])}removeAttr(e){return this.el.removeAttribute(e),this}removeStyle(e){return this.el.style.removeProperty(e),this}is(e){return this.el===(e.el||e)}isTag(e){return this.el.tagName.toLowerCase()===e.toLowerCase()}closest(e){for(var t=this,r=!1;!(r=t.hasClass(e));){if(!t.el.parentNode)return null;t=Tn.create(t.el.parentNode)}return r?t:null}parent(){return Tn.create(this.el.parentNode)}hasParent(){return!!this.el.parentNode}removeClass(...e){return this.el.classList.remove(...e),this}hasClass(e){return!!this.el.classList&&this.el.classList.contains(e)}addClass(...e){return this.el.classList.add(...e),this}onlyOneClass(e){var t=this.parent().$(`.${e}`);t&&t.removeClass(e),this.addClass(e)}toggleClass(e,t){this.el.classList.toggle(e,t)}html(e){return w(e)?this.el.innerHTML:(P(e)?this.el.innerHTML=e:this.empty().append(e),this)}htmlDiff(e){if(this.fragment){var t=this.createChildrenFragment();!function(e,t){e=e.el||e,t=t.el||t;for(var r=bn(e),n=bn(t),i=Math.max(r.length,n.length),a=0;a<i;a++)yn(e,r[a],n[a],a)}(t,e),this.html(t)}else this.empty().append(e),this.fragment=!0}find(e){return this.el.querySelector(e)}$(e){var t=this.find(e);return t?Tn.create(t):null}findAll(e){return this.el.querySelectorAll(e)}$$(e){return[...this.findAll(e)].map(e=>Tn.create(e))}empty(){for(;this.el.firstChild;)this.el.removeChild(this.el.firstChild);return this}append(e){return P(e)?this.el.appendChild(document.createTextNode(e)):this.el.appendChild(e.el||e),this}prepend(e){return P(e)?this.el.prepend(document.createTextNode(e)):this.el.prepend(e.el||e),this}appendHTML(e){var t=Tn.create("div").html(e);this.append(t.createChildrenFragment())}createChildrenFragment(){const e=this.children();var t=document.createDocumentFragment();return e.forEach(e=>t.appendChild(e.el)),t}appendTo(e){return(e.el?e.el:e).appendChild(this.el),this}remove(){return this.el.parentNode&&this.el.parentNode.removeChild(this.el),this}removeChild(e){return this.el.removeChild(e.el||e),this}text(e){if(w(e))return this.el.textContent;var t=e;return e instanceof Tn&&(t=e.text()),this.el.textContent=t,this}css(e,t){if(S(e)&&S(t))this.el.style[e]=t;else if(S(e)){if(P(e))return getComputedStyle(this.el)[e];Object.assign(this.el.style,e)}return this}getComputedStyle(...e){var t=getComputedStyle(this.el),r={};return e.forEach(e=>{r[e]=t[e]}),r}getStyleList(...e){for(var t={},r=this.el.style.length,n=0;n<r;n++){var i=this.el.style[n];t[i]=this.el.style[i]}return e.forEach(e=>{t[e]=this.css(e)}),t}cssText(e){return w(e)?this.el.style.cssText:(e!=this.el.tempCssText&&(this.el.style.cssText=e,this.el.tempCssText=e),this)}cssArray(e){return e[0]&&(this.el.style[e[0]]=e[1]),e[2]&&(this.el.style[e[2]]=e[3]),e[4]&&(this.el.style[e[4]]=e[5]),e[6]&&(this.el.style[e[6]]=e[7]),e[8]&&(this.el.style[e[8]]=e[9]),this}cssFloat(e){return parseFloat(this.css(e))}cssInt(e){return parseInt(this.css(e))}px(e,t){return this.css(e,je.px(t))}rect(){return this.el.getBoundingClientRect()}offsetRect(){return{top:this.el.offsetTop,left:this.el.offsetLeft,width:this.el.offsetWidth,height:this.el.offsetHeight}}offset(){var e=this.rect(),t=Tn.getScrollTop(),r=Tn.getScrollLeft();return{top:e.top+t,left:e.left+r}}offsetLeft(){return this.offset().left}offsetTop(){return this.offset().top}position(){return this.el.style.top?{top:parseFloat(this.css("top")),left:parseFloat(this.css("left"))}:this.rect()}size(){return[this.width(),this.height()]}width(){return this.el.offsetWidth||this.rect().width}contentWidth(){return this.width()-this.cssFloat("padding-left")-this.cssFloat("padding-right")}height(){return this.el.offsetHeight||this.rect().height}contentHeight(){return this.height()-this.cssFloat("padding-top")-this.cssFloat("padding-bottom")}dataKey(e){return this.uniqId+"."+e}data(e,t){if(2!=arguments.length){if(1==arguments.length)return jn[this.dataKey(e)];var r=Object.keys(jn),n=this.uniqId+".";return r.filter((function(e){return 0==e.indexOf(n)})).map((function(e){return jn[e]}))}return jn[this.dataKey(e)]=t,this}val(e){if(w(e))return this.el.value;if(S(e)){var t=e;e instanceof Tn&&(t=e.val()),this.el.value=t}return this}get value(){return this.el.value}get naturalWidth(){return this.el.naturalWidth}get naturalHeight(){return this.el.naturalHeight}get files(){return this.el.files?[...this.el.files]:[]}realVal(){switch(this.el.nodeType){case"INPUT":var e=this.attr("type");if("checkbox"==e||"radio"==e)return this.checked();case"SELECT":case"TEXTAREA":return this.el.value}return""}int(){return parseInt(this.val(),10)}float(){return parseFloat(this.val())}show(e="block"){return this.css("display","none"!=e?e:"block")}hide(){return this.css("display","none")}isHide(){return"none"==this.css("display")}toggle(e){var t=this.isHide();return 1==arguments.length?t&&e?this.show():this.hide():t?this.show():this.hide()}scrollIntoView(){this.el.scrollIntoView()}addScrollLeft(e){return this.el.scrollLeft+=e,this}addScrollTop(e){return this.el.scrollTop+=e,this}setScrollTop(e){return this.el.scrollTop=e,this}setScrollLeft(e){return this.el.scrollLeft=e,this}scrollTop(){return this.el===document.body?Tn.getScrollTop():this.el.scrollTop}scrollLeft(){return this.el===document.body?Tn.getScrollLeft():this.el.scrollLeft}scrollHeight(){return this.el.scrollHeight}scrollWidth(){return this.el.scrollWidth}on(e,t,r,n){return this.el.addEventListener(e,t,r,n),this}off(e,t){return this.el.removeEventListener(e,t),this}getElement(){return this.el}createChild(e,t="",r={},n={}){let i=Tn.create(e,t,r);return i.css(n),this.append(i),i}firstChild(){return Tn.create(this.el.firstElementChild)}children(){var e=this.el.firstElementChild;if(!e)return[];var t=[];do{t.push(Tn.create(e)),e=e.nextElementSibling}while(e);return t}childLength(){return this.el.children.length}replace(e){return this.el.parentNode&&this.el.parentNode.replaceChild(e.el||e,this.el),this}replaceChild(e,t){return this.el.replaceChild(t.el||t,e.el||e),this}checked(e=!1){return 0==arguments.length?!!this.el.checked:(this.el.checked=!!e,this)}click(){return this.el.click(),this}focus(){return this.el.focus(),this}select(){return this.el.select(),this}blur(){return this.el.blur(),this}select(){return this.el.select(),this}context(e="2d"){return this._initContext||(this._initContext=this.el.getContext(e)),this._initContext}resize({width:e,height:t}){this._initContext=null;var r=this.context(),n=window.devicePixelRatio||1;this.px("width",e),this.px("height",t),this.el.width=e*n,this.el.height=t*n,r.scale(n,n)}clear(){this.context().clearRect(0,0,this.el.width,this.el.height)}update(e){this.clear(),e.call(this,this)}drawOption(e={}){var t=this.context();Object.assign(t,e)}drawLine(e,t,r,n){var i=this.context();i.beginPath(),i.moveTo(e,t),i.lineTo(r,n),i.stroke(),i.closePath()}drawPath(...e){var t=this.context();t.beginPath(),e.forEach((e,r)=>{0==r?t.moveTo(e[0],e[1]):t.lineTo(e[0],e[1])}),t.stroke(),t.fill(),t.closePath()}drawCircle(e,t,r){var n=this.context();n.beginPath(),n.arc(e,t,r,0,2*Math.PI),n.stroke(),n.fill()}drawText(e,t,r){this.context().fillText(r,e,t)}}r(2);class wn{constructor(e=[],t={container:"body"}){this.animations=e,this.compiledAnimation=[],this.options=t,this.fps=t.fps||60,this.totalTime=V(this.fps,t.totalTimecode),this.totalTimecode=t.totalTimecode||"00:00:00:00",this.currentTime=0,this.currentTimecode="00:00:00:00",this.startTime=0,this.endTime=this.totalTime,this.initialize()}searchBySelector(e,t="body"){return t="body"===t?document.body:t,Tn.create(t).$$(e)}initialize(){this.animations.forEach(e=>{var t=e.container||this.options.container||"body",r=this.searchBySelector(e.selector,t);e.compiled={},e.properties.forEach(t=>{e.compiled[`${t.property}`]=this.compiledTimingFunction(r,t)})})}searchTimelineOffset(e){var t=[];return this.animations.forEach(r=>{r.properties.forEach(n=>{var i=r.compiled[`${n.property}`];t.push(...i.filter(t=>!(!t.isOnlyTime||t.startTime!=e)||t.startTime<=e&&e<t.endTime))})}),t.filter(e=>e)}parseOffset(e,t,r){if(k(r)){var[n,i,a]=r;return w(i)&&(i=e.css(t)),{time:n,value:i,timing:a}}return r&&w(r.value)&&(r.value=e.css(t)),r}compiledTimingFunction(e=[],t){let r=[];return 1===t.keyframes.length?r:(e.forEach((e,n)=>{r.push(...t.keyframes.map((r,i)=>{var a=this.parseOffset(e,t.property,r),s=this.parseOffset(e,t.property,t.keyframes[i+1]);s||(s={time:a.time,value:a.value+""});var o={layer:e,layerIndex:n,property:t.property,isResetFunction:this.checkResetInterpolateFunction(t.property),isOnlyTime:a.time===s.time,startTime:a.time,endTime:s.time,startValue:a.value,endValue:s.value,timing:a.timing,interpolateFunction:dn(e,t.property,a.value,s.value),timingFunction:gn(a.timing)};return o.func=this.makeTimingFunction(o),o}).filter(e=>e))}),r)}makeTimingFunction(e){return t=>{var r=e.endTime-e.startTime,n=1;return 0!==r&&(n=(t-e.startTime)/r),e.interpolateFunction(e.timingFunction(n),n,e.timingFunction)}}checkResetInterpolateFunction(e){switch(e){case"offset-path":case"background-image":return!0}return!1}seek(e=null,t=(e=>e)){(S(e)||null!==e)&&this.setTimelineCurrentTime(e);var r=1e3*this.currentTime,n=this.searchTimelineOffset(r).filter(t),i=new WeakMap,a=[];n.forEach(e=>{i.has(e.layer)||(i.set(e.layer,{}),a.push(e.layer));var t=i.get(e.layer);if(e.isResetFunction){var n=e.func(r,e.layer,e.layerIndex);Object.assign(t,n)}else Object.assign(t,{[e.property]:e.func(r,e.layer,e.layerIndex)})}),a.forEach(e=>{e.css(i.get(e))})}getKeyframeList(e){this.animations.forEach(t=>{t.properties.forEach(t=>{t.keyframes.forEach(t=>{e&&e(t)})})})}getSelectedTimelineLastTime(){var e=0;return this.getKeyframeList(t=>{e=Math.max(t.time,e)}),e}getSelectedTimelineFirstTime(){var e=Number.MAX_SAFE_INTEGER;return this.getKeyframeList(t=>{e=Math.min(t.time,e)}),e}getSelectedTimelinePrevTime(){var e=this.getSelectedTimelineFirstTime();return this.getKeyframeList(t=>{G(this.fps,t.time)<this.currentTimecode&&(e=Math.max(t.time,e))}),e}getSelectedTimelineNextTime(){var e=this.getSelectedTimelineLastTime();return this.getKeyframeList(t=>{G(this.fps,keyframe.time)>this.currentTimecode&&(e=Math.min(keyframe.time,e))}),e}getTimelineLayerInfo(e=60,t="00:00:10:00"){var r=V(e,t);return{fps:e,currentTimecode:G(e,0),totalTimecode:G(e,r),currentTime:0,totalTime:r,displayStartTime:0,displayEndTime:r}}setTimelineCurrentTime(e){var{fps:t,totalTimecode:r}=this,n=e,i=e;+n+""===n&&(i=q(t,n=+n)),i>r&&(i=r);var a=V(t,i);this.currentTime=a,this.currentTimecode=G(t,a)}setDisplayTimeDxRate(e,t,r){var n=e*this.totalTime,i=t+n,a=r+n;i=Math.max(i,0),0===(i=Math.min(i,a))&&(a=r-t),a=Math.max(a,i),(a=Math.min(a,this.totalTime))===this.totalTime&&(i=this.totalTime-(r-t)),this.displayStartTime=i,this.displayEndTime=a}setDisplayStartTimeRate(e){this.displayStartTime=e*this.totalTime}setDisplayEndTimeRate(e){this.displayEndTime=e*this.totalTime}setTimelineCurrentTimeRate(e){var{displayStartTime:t,displayEndTime:r,fps:n}=this,i=t+(r-t)*e;this.setTimelineCurrentTime(G(n,i))}setTimelineTotalTime(e){var t=e,r=e;+t+""===t&&(t=+t,r=q(this.fps,t)),V(this.fps,r)<this.displayEndTime&&(this.displayEndTime=V(this.fps,r),this.displayStartTime=0),this.totalTimecode=r,this.totalTime=V(this.fps,r)}getTimelineObject(e){return this.animations.find(t=>t.id===e)}getDefaultPropertyValue(e){switch(e){case"mix-blend-mode":return"normal";case"rotate":return"0deg";case"box-shadow":return"0px 0px 0px 0px rgba(0, 0, 0, 1)";case"text-shadow":return"0px 0px 0px rgba(0, 0, 0, 1)";case"opacity":return 1;default:return""}}setFps(e){this.fps=e,this.currentTimecode=G(e,this.currentTime),this.totalTimecode=G(e,this.totalTime)}}function Sn(e=[],t={fps:60,duration:1e3,container:"body"}){var r=w(t.fps)?60:+t.fps,n=w(t.container)?"body":t.container,i=w(t.speed)?1:+t.speed,a=w(t.duration)?1e3:+t.duration,s=w(t.iterationCount)?1:+t.iterationCount,o=w(t.direction)?"normal":t.direction,u=()=>{},l=()=>{},c=()=>{},p=()=>{},h=()=>{};E(t.onTick)&&(u=t.onTick),E(t.onStart)&&(l=t.onStart),E(t.onEnd)&&(c=t.onEnd),E(t.onFirst)&&(p=t.onFirst),E(t.onLast)&&(h=t.onLast);var f=new wn(e,{fps:r,container:n,totalTimecode:G(r,a/1e3)}),d=z({speed:i,duration:a,iterationCount:s,direction:o,startCallback:l,endCallback:c,firstCallback:p,lastCallback:h,tick:(e,t)=>{f.seek(G(f.fps,e/1e3)),u(e,t,r)}});return{get elapsed(){return d.elapsed},get fps(){return f.fps},get totalTime(){return f.totalTime},get currentTime(){return f.currentTime},play(){d.play()},stop(){d.stop()},pause(){d.pause()}}}r.d(t,"Player",(function(){return Sn}));t.default={Player:Sn}}])}));